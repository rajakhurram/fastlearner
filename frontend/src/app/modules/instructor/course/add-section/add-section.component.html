<ng-container *ngIf="this.selectedContentType == this.courseContentType.COURSE">
  <div nz-row style="margin-top: 3%">
    <div
      nz-row
      class="w-100"
      *ngIf="sections.length != 0 && showSectionDltContainer"
    >
      <span class="all-section-checkbox-span">
        <label
          nz-checkbox
          [(ngModel)]="checkAllSection"
          (change)="allSectionCheck($event)"
        ></label>
      </span>
  
      <span class="ml-1">
        <p class="topics-heading">Select all sections</p>
      </span>
  
      <span
        *ngIf="showDltSectionBtn"
        class="ml-1 dlt-topic-container"
        (click)="deleteSections()"
      >
        <img
          class="dlt-icon cursor-pointer"
          src="../../../../../assets/icons/delete-icon.svg"
        />
      </span>
    </div>
  
    <nz-collapse class="section-collapse">
      <div
        cdkDropList
        class="example-list"
        (cdkDropListDropped)="dropSection($event)"
        (cdkDropListEntered)="sectionEnter($event)"
      >
        <ng-container *ngFor="let section of sections; let i = index">
          <div class="example-box" *ngIf="!section.delete">
            <nz-collapse-panel
              (cdkDragStarted)="onDragSectionStarted(section)"
              cdkDrag
              class="section-collapse-panel"
              [ngClass]="{ 'mt-2': section?.level !== 1 }"
              [nzActive]="section.active"
              [nzShowArrow]="false"
              [nzHeader]="header"
              [nzExtra]="expandIcon"
            >
              <div nz-row class="switch-container" style="margin: 0">
                <p class="section-name">Section name</p>
                <p class="mandatory">*</p>
              </div>
  
              <div class="section-name-input-row" nz-row>
                <div class="section-name-input-div">
                  <input
                    [(ngModel)]="section.name"
                    class="section-name-input font-color-black"
                    nz-input
                    placeholder="Section name"
                    type="text"
                    maxlength="100"
                    (keydown)="preventEmoji($event)"
                    (paste)="preventEmojiOnPaste($event)"
                  />
                </div>
              </div>
  
              <div
                nz-col
                nzSpan="3"
                class="mt-1"
                *ngIf="selectedContentType != courseContentType.TEST"
              >
                <button
                  *ngIf="section.generateTopicBtn2"
                  class="gen-topic-btn"
                  nz-button
                  nzType="primary"
                  nzGhost
                  (click)="showGenerateTopicsPrompt(section)"
                >
                  Generate topics
                </button>
              </div>
  
              <div
                *ngIf="section.generateTopicsPrompt"
                nz-row
                style="background-color: white"
                class="mt-1 prompt-row-div"
              >
                <div nz-col nzXs="16" nzSm="16" nzMd="17" nzLg="19">
                  <input
                    [(ngModel)]="section.topicInput"
                    (input)="topicInputChange(section)"
                    (keydown.enter)="generateTopics(section)"
                    class="prompt-input prompt-res"
                    nz-input
                    placeholder="Insert prompt"
                    type="text"
                  />
                </div>
  
                <div nz-col nzSpan="4" class="gen-topics-btn-col">
                  <button
                    class="gen-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    [class.disable-generate-topics-prompt]="!section.topicInput"
                    (click)="generateTopics(section)"
                  >
                    Generate topics
                  </button>
                </div>
              </div>
  
              <div nz-row *ngIf="section.showChatBox" class="chat-box-row mt-1">
                <div nz-col nzSpan="24">
                  <div nz-row class="ml-1 mr-1 mt-1">
                    <div nz-col nzSpan="1" class="avatar-container">
                      <nz-avatar
                        class="icon user-icon"
                        nzAlt="Profile"
                        [nzText]="getInitialOfLoggedInUser | initialCharactor"
                      ></nz-avatar>
                    </div>
  
                    <div
                      nz-col
                      nzXs="16"
                      nzSm="20"
                      nzLg="20"
                      nzMd="20"
                      class="question-container"
                    >
                      <p class="question">
                        {{ section.questionAnswers.question }}
                      </p>
                    </div>
                    <div nz-col class="question-container">
                      <p
                        *ngIf="section.questionAnswers.answers.length != 0"
                        class="clear-all"
                        (click)="clearTopicChat(section)"
                      >
                        Clear All
                      </p>
                    </div>
                  </div>
  
                  <div nz-row class="ml-1 mr-1 mt-1">
                    <div nz-col nzSpan="1" class="avatar-container">
                      <nz-avatar
                        class="icon ai-icon"
                        nzText="AI"
                        nzSrc=""
                        nzAlt="AI"
                      ></nz-avatar>
                    </div>
  
                    <div nz-col nzSpan="22" class="answer-container">
                      <ng-container *ngIf="section.questionAnswers.answers">
                        <div
                          class="mt-1"
                          *ngFor="let answer of section.questionAnswers.answers"
                        >
                          <p class="answer">{{ answer }}</p>
                        </div>
                      </ng-container>
                      <div *ngIf="section.showSpinner" class="spinner-container">
                        <nz-spin
                          [nzSpinning]="section.showSpinner"
                          class="spinner mt-2"
                          nzSimple
                        ></nz-spin>
                      </div>
                    </div>
                  </div>
  
                  <div nz-row class="mt-2 mb-2 ml-1 mr-1 regen-container">
                    <div nz-col nzXs="16" nzSm="20" nzMd="20" nzLg="20">
                      <input
                        [(ngModel)]="section.topicInput"
                        (input)="topicInputChange(section)"
                        class="prompt-input"
                        nz-input
                        placeholder="Type here"
                        type="text"
                      />
                    </div>
  
                    <div nz-col nzSpan="3" class="gen-topics-btn-col">
                      <button
                        class="gen-topic-btn"
                        nz-button
                        nzType="primary"
                        nzGhost
                        (click)="generateTopics(section)"
                      >
                        Regenerate
                      </button>
                    </div>
                  </div>
                </div>
              </div>
  
              <div
                *ngIf="section.createTopics"
                nz-row
                class="topic-container mt-1"
              >
                <div nz-col nzSpan="24">
                  <div nz-row *ngIf="!section.deleteAll">
                    <span class="all-topic-checkbox-span">
                      <label
                        nz-checkbox
                        [(ngModel)]="section.checkAll"
                        (change)="allTopicCheck(section, $event)"
                      ></label>
                    </span>
  
                    <span class="ml-1">
                      <p class="topics-heading">Topics</p>
                    </span>
  
                    <span
                      *ngIf="section.deleteTopicIcon"
                      class="ml-1 dlt-topic-container"
                    >
                      <img
                        class="dlt-icon cursor-pointer"
                        (click)="deleteTopics(section)"
                        src="../../../../../assets/icons/delete-icon.svg"
                      />
                    </span>
                  </div>
  
                  <div nz-row>
                    <nz-collapse class="topic-collapse">
                      <div
                        cdkDropList
                        class="example-list"
                        (cdkDropListDropped)="dropTopic($event, section.topics)"
                        (cdkDropListEntered)="topicEnter($event)"
                      >
                        <div
                          class="example-box"
                          *ngFor="let topic of section.topics; let j = index"
                        >
                          <nz-collapse-panel
                            *ngIf="!topic.delete"
                            cdkDrag
                            (cdkDragStarted)="onDragTopicStarted(topic)"
                            [ngClass]="{ 'mt-2': j !== 0 }"
                            class="topic-collapse-panel"
                            [nzHeader]="topic_header"
                            [nzActive]="topic.active"
                            [nzDisabled]="topic.disabled"
                            [nzShowArrow]="false"
                            [nzExtra]="topic_expandIcon"
                          >
                            <div
                              *ngIf="topic.topicContainer"
                              nz-row
                              class="content-type-container"
                            >
                              <div
                                *ngIf="topic.contentScreen"
                                nz-col
                                class="w-100"
                              >
                                <div class="mt-1">
                                  <p class="font-color-blue content-type-text">
                                    Select content type
                                  </p>
                                </div>
                                <div>
                                  <p class="font-color-black content-type-text">
                                    Select the main type of content. Files can be
                                    added as resource
                                  </p>
                                </div>
  
                                <div nz-row>
                                  <nz-card
                                    (click)="openContent(topic, 'Video')"
                                    nzHoverable
                                    class="content-card"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-video.svg"
                                      />
                                      <p class="content-types-img-text">Video</p>
                                    </div>
                                  </nz-card>
                                  <nz-card
                                    (click)="openContent(topic, 'Article')"
                                    nzHoverable
                                    class="content-card ml-2"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-article.svg"
                                      />
                                      <p class="content-types-img-text">
                                        Article
                                      </p>
                                    </div>
                                  </nz-card>
                                  <nz-card
                                    (click)="openContent(topic, 'Quiz')"
                                    nzHoverable
                                    class="content-card"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-quiz.svg"
                                      />
                                      <p class="content-types-img-text">Quiz</p>
                                    </div>
                                  </nz-card>
                                </div>
                              </div>
  
                              <div *ngIf="topic.videoSection" nz-col nzSpan="24">
                                <div nz-row>
                                  <div *ngIf="topic.videoSection">
                                    <div class="mt-1 flex-container">
                                      <p class="topic-content-text">
                                        Content type
                                      </p>
                                      <nz-select
                                        [nzCustomTemplate]="defaultTemplate"
                                        [(ngModel)]="topic.selectedContentType"
                                        class="content-menu"
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectContentType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          *ngFor="
                                            let content of topic.contentOptions
                                          "
                                          [nzLabel]="content"
                                          [nzValue]="content"
                                        >
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeQuiz"
                                            src="../../../../../assets/icons/content-quiz.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeArticle"
                                            src="../../../../../assets/icons/content-article.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeVideo"
                                            src="../../../../../assets/icons/content-video.svg"
                                          />
                                          {{ content }}
                                        </nz-option>
                                      </nz-select>
                                      <ng-template #defaultTemplate>
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType == typeQuiz
                                          "
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeArticle
                                          "
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType == typeVideo
                                          "
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ topic.selectedContentType }}
                                      </ng-template>
                                    </div>
                                  </div>
                                </div>
  
                                <div nz-row [nzGutter]="16" class="mt-3">
                                  <div nz-col nzXs="24" nzMd="8" nzLg="8">
                                    <label class="font-color-blue"
                                      >Upload Video
                                      <span class="mandatory">*</span></label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="display: flex; align-items: stretch"
                                    >
                                      <span
                                        class="file-name"
                                        nz-tooltip
                                        [nzTooltipTitle]="
                                          topic.video.videoData.videoFileName
                                        "
                                        nzTooltipPlacement="top"
                                        >{{
                                          topic.video.videoData.videoFileName !=
                                          "YOUTUBE"
                                            ? topic.video.videoData.videoFileName
                                            : "Add Video"
                                        }}</span
                                      >
  
                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleVideoChange($event, topic)
                                          "
                                          [nzCustomRequest]="customRequestVideo"
                                          [nzMultiple]="false"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span nz-icon nzType="upload"></span>
                                            {{
                                              topic.video.videoData.videoBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>
                                    <p class="document-validation">
                                      Note: Files should be at least 720p and less
                                      than 500 MB
                                    </p>
                                  </div>
                                  <div class="or-class">OR</div>
                                  <div nz-col nzXs="24" nzMd="8" nzLg="8">
                                    <label class="font-color-blue youtube-add">
                                      Add a video from YouTube
                                    </label>
                                    <div
                                      class="uploader border-radius"
                                      style="display: flex; align-items: stretch"
                                    >
                                      <img
                                        class="youtube-upload-icon"
                                        src="../../../../../assets/icons/youtube-ins.svg"
                                        alt="YouTube Logo"
                                      />
                                      <input
                                        class="youtube-insert"
                                        nz-input
                                        placeholder="Insert YouTube link"
                                        nzSize="large"
                                        [(ngModel)]="
                                          topic.video.videoData.youtubeVideoUrl
                                        "
                                      />
                                      <button
                                        nz-button
                                        class="upload-button border-radius border-radius h-100"
                                        (click)="youtubeVideoUrlUpload(topic)"
                                      >
                                        <span nz-icon nzType="upload"></span>
                                        Add
                                      </button>
                                    </div>
                                    <p class="document-validation">
                                      Note: Insert your YouTube's course video
                                      link
                                    </p>
                                  </div>
  
                                  <div nz-col nzXs="24" nzMd="7" nzLg="7">
                                    <label class="font-color-blue"
                                      >Upload Document</label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="display: flex; align-items: stretch"
                                    >
                                      <span
                                        class="file-name"
                                        nz-tooltip
                                        [nzTooltipTitle]="
                                          topic?.video?.documentData
                                            ?.documentFileName
                                        "
                                        nzTooltipPlacement="top"
                                        >{{
                                          topic.video.documentData
                                            .documentFileName
                                        }}</span
                                      >
                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleDocumentChange($event, topic)
                                          "
                                          [nzCustomRequest]="
                                            customRequestDocument
                                          "
                                          [nzMultiple]="true"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span nz-icon nzType="upload"></span>
                                            {{
                                              topic.video.documentData
                                                .documentBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>
  
                                    <p class="document-validation">
                                      Note: All file should be at least less than
                                      500 MB
                                    </p>
                                  </div>
                                </div>
  
                                <div nz-row class="mt-3">
                                  <nz-table
                                    *ngIf="topic.video.showTable"
                                    nzTemplateMode
                                    class="w-100 table-class"
                                  >
                                    <thead>
                                      <tr>
                                        <th class="thead-color tr-border-bottom">
                                          File Name
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          File Type
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          Status
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          Date
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          Transcript
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          Summary
                                        </th>
                                        <th class="thead-color tr-border-bottom">
                                          Actions
                                        </th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr
                                        *ngIf="
                                          topic.video.videoData.videoFileType
                                        "
                                      >
                                        <ng-container
                                          *ngIf="!topic.video.videoData.delete"
                                        >
                                          <td class="tr-border-bottom">
                                            {{
                                              topic.video.videoData.videoFileName
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{
                                              topic.video.videoData.videoFileType
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <div
                                              class="container"
                                              *ngIf="
                                                topic.video.videoData
                                                  .videoProgress > 0 &&
                                                topic.video.videoData
                                                  .videoProgress != 100
                                              "
                                            >
                                              <div class="bar"></div>
                                            </div>
                                            <div class="progress-bar">
                                              <nz-progress
                                                *ngIf="
                                                  topic.video.videoData
                                                    .videoProgress == 100
                                                "
                                                [nzStrokeColor]="'#00BA00'"
                                                [nzPercent]="
                                                  topic.video.videoData
                                                    .videoProgress
                                                "
                                                nzSize="small"
                                              ></nz-progress>
                                            </div>
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ topic.video.videoData.date }}
                                          </td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              videoTranscriptModal(
                                                topic.video.videoData
                                              )
                                            "
                                          >
                                            {{
                                              topic.video.videoData
                                                .videoProgress == 100
                                                ? "View/Edit Transcript"
                                                : "-"
                                            }}
                                          </td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              videoSummaryModal(
                                                topic.video.videoData
                                              )
                                            "
                                          >
                                            {{
                                              topic.video.videoData
                                                .videoProgress == 100
                                                ? "View/Edit Summary"
                                                : "-"
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <img
                                              *ngIf="
                                                topic.video.videoData
                                                  .videoProgress == 100
                                              "
                                              (click)="deleteVideoData(topic)"
                                              class="dlt-icon cursor-pointer"
                                              src="../../../../../assets/icons/delete-icon.svg"
                                            />
                                          </td>
                                        </ng-container>
                                      </tr>
                                      <tr
                                        *ngFor="
                                          let document of topic.video.documentData
                                            .documents;
                                          let k = index
                                        "
                                      >
                                        <ng-container *ngIf="!document.delete">
                                          <td class="tr-border-bottom">
                                            {{ document.documentFileName }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ document.documentFileType }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <div
                                              class="container"
                                              *ngIf="
                                                document?.documentProgress > 0 &&
                                                document?.documentProgress != 100
                                              "
                                            >
                                              <div class="bar"></div>
                                            </div>
                                            <div class="progress-bar">
                                              <nz-progress
                                                *ngIf="
                                                  document?.documentProgress ==
                                                  100
                                                "
                                                [nzStrokeColor]="'#00BA00'"
                                                [nzPercent]="
                                                  document?.documentProgress
                                                "
                                                nzSize="small"
                                              ></nz-progress>
                                            </div>
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ document?.date }}
                                          </td>
                                          <td class="tr-border-bottom"></td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              documentSummaryModal(document)
                                            "
                                          >
                                            {{
                                              document?.documentProgress == 100
                                                ? "View/Edit Summary"
                                                : "-"
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <img
                                              (click)="deleteDocument(topic, k)"
                                              *ngIf="
                                                document.documentProgress === 100
                                              "
                                              class="dlt-icon cursor-pointer"
                                              src="../../../../../assets/icons/delete-icon.svg"
                                            />
                                          </td>
                                        </ng-container>
                                      </tr>
                                    </tbody>
                                  </nz-table>
                                </div>
  
                                <div
                                  nz-row
                                  class="w-100 mt-2 justify-content-center"
                                >
                                  <button
                                    [class.quiz-save-btn-disable]="
                                      !topic.validate
                                    "
                                    class="quiz-save-btn cursor-pointer"
                                    nz-button
                                    nzType="primary"
                                    nzGhost
                                    (click)="saveVideo(topic)"
                                  >
                                    Save
                                  </button>
                                </div>
                              </div>
  
                              <div
                                *ngIf="topic.articleSection"
                                nz-col
                                nzSpan="24"
                              >
                                <div class="article-content" nz-row>
                                  <div
                                    *ngIf="topic.articleSection"
                                    class="mt-1 flex-container"
                                  >
                                    <p class="topic-content-text">Content type</p>
                                    <nz-select
                                      class="font-color-black"
                                      [nzCustomTemplate]="defaultTemplate"
                                      [(ngModel)]="topic.selectedContentType"
                                      class="content-menu"
                                      [nzSize]="'large'"
                                      nzPlaceHolder="quiz"
                                      (ngModelChange)="onSelectContentType(topic)"
                                    >
                                      <nz-option
                                        nzCustomContent
                                        *ngFor="
                                          let content of topic.contentOptions
                                        "
                                        [nzLabel]="content"
                                        [nzValue]="content"
                                      >
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeQuiz"
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeArticle"
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeVideo"
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ content }}
                                      </nz-option>
                                    </nz-select>
                                    <ng-template #defaultTemplate>
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType == typeQuiz
                                        "
                                        src="../../../../../assets/icons/content-quiz.svg"
                                      />
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType == typeArticle
                                        "
                                        src="../../../../../assets/icons/content-article.svg"
                                      />
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType == typeVideo
                                        "
                                        src="../../../../../assets/icons/content-video.svg"
                                      />
                                      {{ topic.selectedContentType }}
                                    </ng-template>
                                  </div>
  
                                  <div class="mt-4 ml-2">
                                    <button
                                      class="own-article-btn font-color-blue"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="
                                        openUploadArticleScreen(topic.article)
                                      "
                                    >
                                      <span
                                        nz-icon
                                        nzType="plus"
                                        nzTheme="outline"
                                      ></span>
                                      Add own Article
                                    </button>
                                  </div>
  
                                  <div
                                    *ngIf="topic.article.generateArticleBtn"
                                    class="mt-4 ml-2"
                                  >
                                    <button
                                      class="gen-article-btn"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="openArticlePrompt(topic.article)"
                                    >
                                      Generate Article
                                    </button>
                                  </div>
                                </div>
  
                                <div
                                  *ngIf="topic.article.articlePrompt"
                                  nz-row
                                  class="mt-2 mb-2 ml-2 mr-1 regen-container border-radius"
                                >
                                  <div
                                    nz-col
                                    nzXs="16"
                                    nzSm="16"
                                    nzMd="17"
                                    nzLg="19"
                                  >
                                    <input
                                      [(ngModel)]="
                                        topic.article.articlePromptInput
                                      "
                                      (input)="articleInputChange(topic.article)"
                                      class="prompt-input"
                                      nz-input
                                      placeholder="Type here"
                                      type="text"
                                    />
                                  </div>
  
                                  <div
                                    nz-col
                                    nzSpan="4"
                                    class="gen-topics-btn-col"
                                  >
                                    <button
                                      [class.disable-generate-topics-prompt]="
                                        !topic.article.articlePromptInput
                                      "
                                      class="gen-topic-btn cursor-pointer"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="generateArticles(topic.article)"
                                    >
                                      Generate Article
                                    </button>
                                  </div>
                                </div>
  
                                <div
                                  nz-row
                                  *ngIf="topic.article.showChatBox"
                                  class="chat-box-row mt-2 ml-2 mr-2"
                                >
                                  <div nz-col nzSpan="24">
                                    <div nz-row class="ml-1 mr-1 mt-1">
                                      <div
                                        nz-col
                                        nzSpan="1"
                                        class="avatar-container"
                                      >
                                        <nz-avatar
                                          class="icon user-icon"
                                          [nzText]="
                                            getInitialOfLoggedInUser
                                              | initialCharactor
                                          "
                                          nzAlt="Profile"
                                        ></nz-avatar>
                                      </div>
  
                                      <div
                                        nz-col
                                        nzSpan="21"
                                        class="question-container"
                                      >
                                        <p class="question">
                                          {{
                                            topic.article.questionAnswers.question
                                          }}
                                        </p>
                                      </div>
                                      <div
                                        nz-col
                                        nzSpan="2"
                                        class="question-container"
                                      >
                                        <p
                                          *ngIf="
                                            topic.article.questionAnswers.answers
                                              .length != 0
                                          "
                                          class="clear-all"
                                          (click)="
                                            clearArticleChat(topic.article)
                                          "
                                        >
                                          Clear All
                                        </p>
                                      </div>
                                    </div>
  
                                    <div nz-row class="ml-1 mr-1 mt-1">
                                      <div
                                        nz-col
                                        nzSpan="1"
                                        class="avatar-container"
                                      >
                                        <nz-avatar
                                          class="icon ai-icon"
                                          nzText="AI"
                                          nzSrc=""
                                          nzAlt="AI"
                                        ></nz-avatar>
                                      </div>
  
                                      <div
                                        nz-col
                                        nzSpan="22"
                                        class="answer-container"
                                      >
                                        <ng-container
                                          *ngIf="
                                            topic.article.questionAnswers.answers
                                          "
                                        >
                                          <div
                                            class="mt-1"
                                            *ngFor="
                                              let answer of topic.article
                                                .questionAnswers.answers
                                            "
                                          >
                                            <p class="answer">{{ answer }}</p>
                                          </div>
                                        </ng-container>
                                        <div
                                          *ngIf="topic.article.showSpinner"
                                          class="spinner-container"
                                        >
                                          <nz-spin
                                            [nzSpinning]="
                                              topic.article.showSpinner
                                            "
                                            class="spinner mt-2"
                                            nzSimple
                                          ></nz-spin>
                                        </div>
                                      </div>
                                    </div>
  
                                    <div
                                      nz-row
                                      class="mt-2 mb-2 ml-1 mr-1 regen-container"
                                    >
                                      <div
                                        nz-col
                                        nz-col
                                        nzXs="16"
                                        nzSm="16"
                                        nzMd="17"
                                        nzLg="19"
                                      >
                                        <input
                                          [(ngModel)]="
                                            topic.article.articlePromptInput
                                          "
                                          (input)="topicInputChange(section)"
                                          class="prompt-input"
                                          nz-input
                                          placeholder="Type here"
                                          type="text"
                                        />
                                      </div>
  
                                      <div
                                        nz-col
                                        nzSpan="4"
                                        class="gen-topics-btn-col"
                                      >
                                        <button
                                          class="gen-topic-btn"
                                          nz-button
                                          nzType="primary"
                                          nzGhost
                                          (click)="
                                            generateArticles(topic.article)
                                          "
                                        >
                                          Regenerate
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
  
                                <div
                                  nz-row
                                  class="mt-1 ml-2"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <div nz-col nzXs="24" nzMd="14" nzLg="14">
                                    <label class="font-color-blue"
                                      >Upload Document</label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="display: flex; align-items: stretch"
                                    >
                                      <span class="file-name">{{
                                        topic.article.articleFileName
                                      }}</span>
                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleArticleDocumentChange(
                                              $event,
                                              topic
                                            )
                                          "
                                          [nzCustomRequest]="
                                            customRequestArticleDocument
                                          "
                                          [nzMultiple]="true"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span nz-icon nzType="upload"></span>
                                            {{
                                              topic.video.documentData
                                                .documentBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>
  
                                    <p class="document-validation">
                                      Note: File should be at least less than 4.0
                                      GB
                                    </p>
                                  </div>
  
                                  <ng-container
                                    *ngIf="topic.article.articleSummary != ''"
                                  >
                                    <div class="mt-1 ml-2">
                                      <div class="flex-container">
                                        <label class="font-color-blue"
                                          >Summary</label
                                        >
                                        <label
                                          class="font-color-black cursor-pointer mt-4"
                                          (click)="
                                            articleSummaryModal(topic.article)
                                          "
                                        >
                                          View/Edit summary</label
                                        >
                                      </div>
                                    </div>
  
                                    <div class="mt-1 ml-4">
                                      <div class="flex-container">
                                        <label class="font-color-blue"
                                          >Actions</label
                                        >
                                        <img
                                          class="dlt-icon cursor-pointer mt-4"
                                          src="../../../../../assets/icons/delete-icon.svg"
                                          (click)="deleteArticleDocument(topic)"
                                        />
                                      </div>
                                    </div>
                                  </ng-container>
                                </div>
  
                                <div
                                  class="bar ml-2"
                                  *ngIf="topic.article.articleProgressBar"
                                ></div>
  
                                <div
                                  nz-row
                                  class="mt-3 ml-2 mr-1"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <div nz-col nzSpan="24">
                                    <angular-editor
                                      [(ngModel)]="topic.article.content"
                                      [config]="editorConfig"
                                      [placeholder]="'Insert'"
                                      (ngModelChange)="
                                        editorArticleContentChanged($event, topic)
                                      "
                                    ></angular-editor>
                                  </div>
                                </div>
  
                                <div
                                  nz-row
                                  class="w-100 mt-2 justify-content-center"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <button
                                    class="quiz-save-btn"
                                    nz-button
                                    nzType="primary"
                                    nzGhost
                                    [class.quiz-save-btn-disable]="
                                      !topic.validate
                                    "
                                    (click)="saveArticle(topic)"
                                  >
                                    Save
                                  </button>
                                </div>
                              </div>
  
                              <div nz-col nzSpan="24">
                                <div nz-row>
                                  <div
                                    *ngIf="topic.quizSection"
                                    class="display-flex w-100"
                                  >
                                    <div
                                      class="mt-1 flex-container"
                                      *ngIf="
                                        selectedContentType !=
                                        courseContentType.TEST
                                      "
                                    >
                                      <p class="topic-content-text">
                                        Content type
                                      </p>
                                      <nz-select
                                        [nzCustomTemplate]="defaultTemplate"
                                        [(ngModel)]="topic.selectedContentType"
                                        class="content-menu"
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectContentType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          *ngFor="
                                            let content of topic.contentOptions
                                          "
                                          [nzLabel]="content"
                                          [nzValue]="content"
                                        >
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeQuiz"
                                            src="../../../../../assets/icons/content-quiz.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeArticle"
                                            src="../../../../../assets/icons/content-article.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeVideo"
                                            src="../../../../../assets/icons/content-video.svg"
                                          />
                                          {{ content }}
                                        </nz-option>
                                      </nz-select>
                                      <ng-template #defaultTemplate>
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType == typeQuiz
                                          "
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeArticle
                                          "
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType == typeVideo
                                          "
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ topic.selectedContentType }}
                                      </ng-template>
                                    </div>
  
                                    <div
                                      class="mt-1 flex-container quiz-duration"
                                      [class.ml-4]="
                                        selectedContentType ==
                                        courseContentType.COURSE
                                      "
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Quiz duration
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="00 Min"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="topic.quiz.durationInMinutes"
                                        min="0"
                                        (keypress)="
                                          validateNumberInput(
                                            $event,
                                            false,
                                            false, 
                                            false
                                          )
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>
  
                                    <div
                                      class="mt-1 ml-4 flex-container quiz-duration"
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Passing criteria
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="0%"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="topic.quiz.passingCriteria"
                                        min="0"
                                        max="100"
                                        (keypress)="
                                          validateNumberInput($event, false, true, false)
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>
  
                                    <div
                                      class="mt-1 ml-4 flex-container"
                                      *ngIf="
                                        selectedContentType ==
                                        courseContentType.TEST
                                      "
                                    >
                                      <p
                                        class="topic-content-text color-black pl-0"
                                      >
                                        Randomly Select Questions
                                      </p>
                                      <nz-select
                                        [(ngModel)]="
                                          topic.quiz.randomQuestionType
                                        "
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectRandomQuestionType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          [nzLabel]="'All'"
                                          [nzValue]="'All'"
                                        >
                                          All
                                        </nz-option>
                                        <nz-option
                                          nzCustomContent
                                          [nzLabel]="'Custom'"
                                          [nzValue]="'Custom'"
                                        >
                                          Custom
                                        </nz-option>
                                      </nz-select>
                                    </div>
  
                                    <div *ngIf="topic.quiz.randomQuestionType == randomQuestionCustom"
                                      class="mt-1 ml-4 flex-container quiz-duration"
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Number
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="1"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="topic.quiz.randomQuestion"
                                        min="1"
                                        max="100"
                                        (keypress)="
                                          validateRandomNumberInput($event, topic)
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>
                                  </div>
                                </div>
  
                                <ng-container *ngIf="topic.quizSection">
                                  <div
                                    nz-row
                                    class="mt-2"
                                    *ngIf="
                                      selectedContentType !=
                                      courseContentType.TEST
                                    "
                                  >
                                    <div nz-col nzSpan="24">
                                      <div nz-row class="switch-container">
                                        <p class="section-name font-16">
                                          Quiz Title
                                        </p>
                                        <p class="mandatory">*</p>
                                      </div>
                                      <div nz-row class="mt--1">
                                        <input
                                          (keyup)="onQuizInputChange(topic)"
                                          [(ngModel)]="topic.quiz.title"
                                          nz-input
                                          placeholder="Quiz title"
                                          nzSize="large"
                                        />
                                      </div>
                                    </div>
                                  </div>
  
                                  <div class="mt-2">
                                    <div
                                      cdkDropList
                                      class="example-list"
                                      (cdkDropListDropped)="
                                        dropQuizQuestion(
                                          $event,
                                          topic,
                                          topic.quiz.questions
                                        )
                                      "
                                      (cdkDropListEntered)="
                                        quizQuestionEnter($event)
                                      "
                                    >
                                      <ng-container
                                        *ngFor="
                                          let question of topic.quiz.questions;
                                          let i = index
                                        "
                                      >
                                        <div
                                          class="example-box question-outer-container border-radius mt-4"
                                          *ngIf="!question.delete"
                                        >
                                          <div cdkDrag class="w-100">
                                            <div
                                              nz-row
                                              class="switch-container mt-1"
                                            >
                                              <div
                                                cdkDragHandle
                                                class="quiz-question-drag-container display-inline-block cursor-pointer"
                                              >
                                                <img
                                                  src="../../../../../assets/icons/topic-drag.svg"
                                                  alt=""
                                                />
                                              </div>
                                              <p class="section-name font-16">
                                                {{ question.label }}
                                              </p>
                                              <p class="mandatory">*</p>
                                            </div>
                                            <div nz-row class="mt--1">
                                              <div class="quiz-quest-with-dlt">
                                                <input
                                                  (keyup)="
                                                    onQuizInputChange(topic)
                                                  "
                                                  [(ngModel)]="question.ques"
                                                  nz-input
                                                  placeholder="Let's ask a question"
                                                  nzSize="large"
                                                  maxlength="500"
                                                  (keydown)="preventEmoji($event)"
                                                  (paste)="preventEmojiOnPaste($event)"
                                                />
                                                <small
                                                  style="color: red"
                                                  class="text-danger"
                                                  *ngIf="question.ques?.length === 500"
                                                >
                                                  Youve reached the 500 character limit.
                                                </small>
                                              </div>
  
                                              <div
                                                class="quiz-question-type ml-2"
                                              >
                                                <nz-select
                                                  [nzCustomTemplate]="
                                                    selected_quest_type_icon
                                                  "
                                                  class="w-100"
                                                  [nzSize]="'large'"
                                                  nzPlaceHolder="Select type"
                                                  [(ngModel)]="
                                                    question.questionType
                                                  "
                                                  (ngModelChange)="
                                                    changeQuestionType(
                                                      topic,
                                                      question
                                                    )
                                                  "
                                                >
                                                  <nz-option
                                                    nzCustomContent
                                                    *ngFor="
                                                      let questionType of questionTypes
                                                    "
                                                    [nzLabel]="
                                                      questionType?.value
                                                    "
                                                    [nzValue]="questionType"
                                                  >
                                                    <div
                                                      class="display-inline-flex quest-type-menu-icon"
                                                    >
                                                      <img
                                                        [attr.src]="
                                                          questionType?.src
                                                        "
                                                        [ngStyle]="{
                                                          height:
                                                            questionType?.key ===
                                                            questionType?.TRUE_FALSE
                                                              ? '7px'
                                                              : '9px'
                                                        }"
                                                      />
                                                    </div>
                                                    <span>{{
                                                      questionType?.value
                                                    }}</span>
                                                  </nz-option>
  
                                                  <ng-template
                                                    #selected_quest_type_icon
                                                  >
                                                    <img
                                                      style="height: 13px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key ==
                                                        questionType.MULTIPLE_CHOICE
                                                      "
                                                      src="../../../../../assets/icons/multiple_choice.svg"
                                                    />
                                                    <img
                                                      style="height: 13px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key == 'SINGLE_CHOICE'
                                                      "
                                                      src="../../../../../assets/icons/single_choice.svg"
                                                    />
                                                    <img
                                                      style="height: 9px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key == 'TRUE_FALSE'
                                                      "
                                                      src="../../../../../assets/icons/tf.svg"
                                                    />
                                                    <img
                                                      style="height: 7px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key == 'TEXT_FIELD'
                                                      "
                                                      src="../../../../../assets/icons/text_field.svg"
                                                    />
                                                    {{
                                                      question?.questionType
                                                        ?.value
                                                    }}
                                                  </ng-template>
                                                </nz-select>
                                              </div>
  
                                              <button
                                                (click)="
                                                  removeQuizQuestion(
                                                    topic,
                                                    question
                                                  )
                                                "
                                                class="action-delete border-radius cursor-pointer ml-2"
                                              >
                                                <span
                                                  class="action-icon font-16"
                                                  nz-icon
                                                  nzType="delete"
                                                  nzTheme="fill"
                                                ></span>
                                              </button>
  
                                              <div
                                                *ngIf="
                                                  i ===
                                                  topic.quiz.questions.length - 1
                                                "
                                                class="ml-1 addQuesBtn-cont text-align-center"
                                              ></div>
                                            </div>
  
                                            <div nz-row class="mt-1">
                                              <ng-container
                                                *ngIf="
                                                  question?.questionType?.key !=
                                                  questionType.TRUE_FALSE
                                                "
                                              >
                                                <ng-container
                                                  *ngFor="
                                                    let answer of question?.answers;
                                                    let j = index
                                                  "
                                                >
                                                  <div
                                                    *ngIf="!answer.delete"
                                                    class="display-flex w-100"
                                                  >
                                                    <div
                                                      nz-col
                                                      class="mt-1 quiz-answers-section"
                                                    >
                                                      <nz-input-group
                                                        class="answer-input-group"
                                                        [nzSuffix]="delete_answer"
                                                        [nzAddOnBefore]="
                                                          answer_order
                                                        "
                                                      >
                                                        <input
                                                          class="answer-input"
                                                          (keyup)="
                                                            onQuizInputChange(
                                                              topic
                                                            )
                                                          "
                                                          [(ngModel)]="answer.ans"
                                                          (ngModelChange)="
                                                            quizOptions(
                                                              question,
                                                              j
                                                            )
                                                          "
                                                          nz-input
                                                          placeholder="Option {{
                                                            answer.label
                                                          }}"
                                                          nzSize="large"
                                                        />
  
                                                        <ng-template
                                                          #answer_order
                                                        >
                                                          <span
                                                            *ngIf="answer?.ans"
                                                            >{{
                                                              answer?.answerOrder
                                                            }}
                                                            .</span
                                                          >
                                                        </ng-template>
  
                                                        <ng-template
                                                          #delete_answer
                                                        >
                                                          <span
                                                            class="cursor-pointer"
                                                            style="color: red"
                                                            nz-icon
                                                            nzType="close"
                                                            nzTheme="outline"
                                                            (click)="
                                                              removeQuizQuestionAnswers(
                                                                topic,
                                                                question,
                                                                answer
                                                              )
                                                            "
                                                          ></span>
                                                        </ng-template>
                                                      </nz-input-group>
                                                    </div>
                                                  </div>
  
                                                  <div
                                                    *ngIf="
                                                      j ===
                                                      question.answers.length - 1
                                                    "
                                                    nz-row
                                                    class="mt-1 w-100"
                                                  ></div>
                                                </ng-container>
                                              </ng-container>
                                            </div>
  
                                            <div
                                              *ngIf="
                                                question?.questionType?.key !=
                                                questionType.TRUE_FALSE
                                              "
                                              nz-row
                                              class="mt-2"
                                            >
                                              <button
                                                class="add-opt-btn"
                                                nz-button
                                                nzType="primary"
                                                nzGhost
                                                (click)="
                                                  addOption(topic, question)
                                                "
                                              >
                                                <span
                                                  nz-icon
                                                  nzType="plus"
                                                  nzTheme="outline"
                                                ></span>
                                                Add an option
                                              </button>
                                            </div>
  
                                            <div nz-row class="mt-3">
                                              <p class="font-color-black">
                                                Correct answer
                                              </p>
                                            </div>
  
                                            <div
                                              class="answer-row"
                                              nz-row
                                              *ngIf="true"
                                            >
                                              <ng-container
                                                *ngFor="
                                                  let answer of questionShowAnswers(
                                                    question.answers
                                                  );
                                                  let k = index
                                                "
                                              >
                                                <span
                                                  *ngIf="
                                                    !answer.delete &&
                                                    answer.ans &&
                                                    !answer?.exist
                                                  "
                                                  class="answer-option-span cursor-pointer"
                                                  (click)="
                                                    markCorrectAnswer(
                                                      topic,
                                                      question,
                                                      answer
                                                    )
                                                  "
                                                  [ngClass]="{
                                                    'correct-answer':
                                                      answer?.isCorrectAnswer
                                                  }"
                                                >
                                                  {{
                                                    question?.questionType?.key ==
                                                    questionType.TRUE_FALSE
                                                      ? (answer?.ans
                                                        | slice : 0 : 1)
                                                      : answer?.answerOrder
                                                  }}
                                                </span>
                                              </ng-container>
                                            </div>
  
                                            <div nz-row class="mt-2">
                                              <p>Explanation (Optional)</p>
                                              <textarea
                                                rows="4"
                                                nz-input
                                                placeHolder="Write explanation here"
                                                [(ngModel)]="question.explanation"
                                                (keydown)="preventEmoji($event)"
                                                (paste)="preventEmojiOnPaste($event)"
                                              ></textarea>
                                            </div>
                                          </div>
                                        </div>
                                      </ng-container>
                                    </div>
  
                                    <div nz-row class="mt-2 mb-2">
                                      <button
                                        class="addQuesBtn font-color-blue"
                                        nz-button
                                        nzType="primary"
                                        nzGhost
                                        (click)="
                                          addQuestion(topic, topic.quiz.questions)
                                        "
                                      >
                                        <span
                                          nz-icon
                                          nzType="plus"
                                          nzTheme="outline"
                                        ></span>
                                        Add a question
                                      </button>
                                    </div>
                                  </div>
  
                                  <div
                                    nz-row
                                    class="w-100 mt-2 justify-content-center"
                                  >
                                    <button
                                      class="quiz-save-btn"
                                      [class.quiz-save-btn-disable]="
                                        !topic.validate
                                      "
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="saveQuiz(topic)"
                                    >
                                      Save
                                    </button>
                                  </div>
                                </ng-container>
                              </div>
                            </div>
  
                            <ng-template #topic_header>
                              <div class="width">
                                <div
                                  cdkDragHandle
                                  (click)="topicActive($event, topic)"
                                  class="topic-drag-container display-inline-block cursor-pointer"
                                >
                                  <img
                                    class="h-100"
                                    src="../../../../../assets/icons/topic-drag.svg"
                                  />
                                </div>
  
                                <div
                                  class="single-topic-checkbox display-inline-block"
                                >
                                  <label
                                    nz-checkbox
                                    [(ngModel)]="topic.checkTopic"
                                    (change)="
                                      singleTopicCheck(section, topic, $event)
                                    "
                                  ></label>
                                </div>
  
                                <div
                                  class="topic-name-input display-inline-block"
                                >
                                  <nz-input-group
                                    class="border-none"
                                    [nzPrefix]="suffixIconSearch"
                                  >
                                    <input
                                      [(ngModel)]="topic.name"
                                      (keyup)="topicPromptKeyUp(topic)"
                                      (click)="stopCollapse($event)"
                                      class="prompt-input topic-input font-color-blue"
                                      type="text"
                                      nz-input
                                      placeholder="Enter topic {{ topic.level }}"
                                      maxlength="100"
                                      (keydown)="preventEmoji($event)"
                                      (paste)="preventEmojiOnPaste($event)"
                                    />
                                  </nz-input-group>
                                  <ng-template #suffixIconSearch>
                                    <img
                                      *ngIf="topic.name"
                                      class="topic-complete-img"
                                      [src]="topic.topicStatusImg"
                                    />
                                  </ng-template>
                                </div>
                              </div>
                            </ng-template>
  
                            <ng-template #topic_expandIcon>
                              <div
                                *ngIf="topic.name"
                                class="display-inline-block content-container"
                                [class.selected-content-type]="
                                  topic.selectedContentType
                                "
                                (click)="topicActive($event, topic)"
                              >
                                <button
                                  *ngIf="!topic.selectedContentType"
                                  class="add-content-btn"
                                  nz-button
                                  nzType="primary"
                                  nzGhost
                                  (click)="openTopicContainer(topic)"
                                >
                                  Add content
                                </button>
                                <span
                                  class="selected-content-type-msg"
                                  *ngIf="
                                    topic.selectedContentType &&
                                    selectedContentType != courseContentType.TEST
                                  "
                                >
                                  <i
                                    >Content type:
                                    {{ topic.selectedContentType }}</i
                                  >
                                </span>
                              </div>
                              <div
                                class="display-inline-block mb-4 ml-auto"
                                (click)="topicActive($event, topic)"
                              >
                                <span>
                                  <img
                                    *ngIf="!topic.active"
                                    class="topic-arrow-icon-img"
                                    src="../../../../../assets/icons/instructor-arrow-down.svg"
                                  />
                                  <img
                                    *ngIf="topic.active"
                                    class="topic-arrow-icon-img"
                                    src="../../../../../assets/icons/instructor-arrow-icon.svg"
                                  />
                                </span>
                              </div>
                            </ng-template>
                          </nz-collapse-panel>
                        </div>
                      </div>
                    </nz-collapse>
                  </div>
                </div>
              </div>
  
              <div nz-row class="mt-1 margin-class">
                <div nz-col class="mb-1">
                  <button
                    class="own-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    (click)="createTopics(section)"
                  >
                    <span nz-icon nzType="plus" nzTheme="outline"></span>
                    Add topic
                  </button>
                </div>
  
                <div nz-col class="ml-2">
                  <button
                    *ngIf="section.generateTopicBtn1"
                    class="gen-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    (click)="showGenerateTopicsPrompt(section)"
                  >
                    Generate topics
                  </button>
                </div>
              </div>
  
              <ng-template #header>
                <div
                  class="display-flex width"
                  (click)="sectionActiveStatus($event, section)"
                >
                  <div cdkDragHandle class="section-drag-container">
                    <img
                      class="h-100"
                      src="../../../../../assets/icons/section-drag.svg"
                    />
                  </div>
                  <div class="single-section-checkbox content-center">
                    <label
                      nz-checkbox
                      [(ngModel)]="section.checkSection"
                      (change)="singleSectionCheck(section, $event)"
                    ></label>
                  </div>
                  <div class="ml-2 content-center">
                    <p
                      class="section-number color-blue"
                      nz-tooltip="{{ section.name }}"
                    >
                      Section {{ section.level }}:
                      {{
                        section?.name?.length > 40
                          ? section?.name?.substring(0, 39) + "..."
                          : section?.name
                      }}
                    </p>
                  </div>
                </div>
              </ng-template>
              <ng-template #expandIcon>
                <div
                  class="switch-container"
                  (click)="sectionActiveStatus($event, section)"
                >
                  <div
                    *ngIf="
                      courseInformationData?.value?.courseType !==
                      courseType.PREMIUM
                    "
                    class="display-inline-block"
                  >
                    <p class="Student-access">Free Student Access</p>
                  </div>
                  <div
                    *ngIf="
                      courseInformationData?.value?.courseType !==
                      courseType.PREMIUM
                    "
                    class="display-inline-block"
                    style="margin-left: 10px"
                  >
                    <nz-switch
                      class="section-switch"
                      [(ngModel)]="section.switchValue"
                      (click)="sectionActive($event)"
                    ></nz-switch>
                  </div>
                  <div
                    [ngStyle]="{
                      position:
                        courseInformationData?.value?.courseType ==
                        courseType.PREMIUM
                          ? 'absolute'
                          : 'relative',
                      right:
                        courseInformationData?.value?.courseType ===
                        courseType.PREMIUM
                          ? '2%'
                          : '0px'
                    }"
                    class="display-inline-block"
                    style="margin-left: 10px"
                  >
                    <img
                      *ngIf="!section.active"
                      src="../../../../../assets/icons/course-section-down-arrow.svg"
                    />
                    <img
                      *ngIf="section.active"
                      src="../../../../../assets/icons/course-section-up-arrow.svg"
                    />
                  </div>
                </div>
              </ng-template>
            </nz-collapse-panel>
          </div>
        </ng-container>
      </div>
    </nz-collapse>
  </div>
  
  <div nz-row class="mt-1">
    <div nz-col nzSpan="4">
      <button
        class="addSectionBtn"
        nz-button
        nzType="primary"
        nzGhost
        (click)="addSection()"
      >
        <span nz-icon nzType="plus" nzTheme="outline"></span>
        Section
      </button>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="selectedContentType == courseContentType.TEST">
  <div nz-row style="margin-top: 3%; background-color: #ecf1ff; padding: 10px">
    <div
      nz-row
      class="w-100"
      *ngIf="sections.length != 0 && showSectionDltContainer"
    >
      <span class="all-section-checkbox-span">
        <label
          nz-checkbox
          [(ngModel)]="checkAllSection"
          (change)="allSectionCheck($event)"
        ></label>
      </span>

      <span class="ml-1">
        <p class="topics-heading">Select all sections</p>
      </span>

      <span
        *ngIf="showDltSectionBtn"
        class="ml-1 dlt-topic-container"
        (click)="deleteSections()"
      >
        <img
          class="dlt-icon cursor-pointer"
          src="../../../../../assets/icons/delete-icon.svg"
        />
      </span>
    </div>

    <nz-collapse class="section-collapse bg-ECF1FF">
      <div
        cdkDropList
        class="example-list"
        (cdkDropListDropped)="dropSection($event)"
        (cdkDropListEntered)="sectionEnter($event)"
      >
        <ng-container *ngFor="let section of sections; let i = index">
          <div class="example-box" *ngIf="!section.delete">
            <nz-collapse-panel
              (cdkDragStarted)="onDragSectionStarted(section)"
              cdkDrag
              class="section-collapse-panel"
              [ngClass]="{
                'test-collapse-height':
                  selectedContentType === courseContentType.TEST,
                'test-collapse-extra':
                  selectedContentType === courseContentType.TEST,
                'background-content':
                  selectedContentType === courseContentType.TEST,
                'mt-2': section?.level !== 1
              }"
              [nzActive]="section.active"
              [nzShowArrow]="false"
              [nzHeader]="header"
              [nzExtra]="expandIcon"
            >
              <div
                nz-col
                nzSpan="3"
                class="mt-1"
                *ngIf="selectedContentType != courseContentType.TEST"
              >
                <button
                  *ngIf="section.generateTopicBtn2"
                  class="gen-topic-btn"
                  nz-button
                  nzType="primary"
                  nzGhost
                  (click)="showGenerateTopicsPrompt(section)"
                >
                  Generate topics
                </button>
              </div>

              <div
                *ngIf="section.generateTopicsPrompt"
                nz-row
                style="background-color: white"
                class="mt-1 prompt-row-div"
              >
                <div nz-col nzXs="16" nzSm="16" nzMd="17" nzLg="19">
                  <input
                    [(ngModel)]="section.topicInput"
                    (input)="topicInputChange(section)"
                    (keydown.enter)="generateTopics(section)"
                    class="prompt-input prompt-res"
                    nz-input
                    placeholder="Insert prompt"
                    type="text"
                  />
                </div>

                <div nz-col nzSpan="4" class="gen-topics-btn-col">
                  <button
                    class="gen-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    [class.disable-generate-topics-prompt]="!section.topicInput"
                    (click)="generateTopics(section)"
                  >
                    Generate topics
                  </button>
                </div>
              </div>

              <div nz-row *ngIf="section.showChatBox" class="chat-box-row mt-1">
                <div nz-col nzSpan="24">
                  <div nz-row class="ml-1 mr-1 mt-1">
                    <div nz-col nzSpan="1" class="avatar-container">
                      <nz-avatar
                        class="icon user-icon"
                        nzAlt="Profile"
                        [nzText]="getInitialOfLoggedInUser | initialCharactor"
                      ></nz-avatar>
                    </div>

                    <div
                      nz-col
                      nzXs="16"
                      nzSm="20"
                      nzLg="20"
                      nzMd="20"
                      class="question-container"
                    >
                      <p class="question">
                        {{ section.questionAnswers.question }}
                      </p>
                    </div>
                    <div nz-col class="question-container">
                      <p
                        *ngIf="section.questionAnswers.answers.length != 0"
                        class="clear-all"
                        (click)="clearTopicChat(section)"
                      >
                        Clear All
                      </p>
                    </div>
                  </div>

                  <div nz-row class="ml-1 mr-1 mt-1">
                    <div nz-col nzSpan="1" class="avatar-container">
                      <nz-avatar
                        class="icon ai-icon"
                        nzText="AI"
                        nzSrc=""
                        nzAlt="AI"
                      ></nz-avatar>
                    </div>

                    <div nz-col nzSpan="22" class="answer-container">
                      <ng-container *ngIf="section.questionAnswers.answers">
                        <div
                          class="mt-1"
                          *ngFor="let answer of section.questionAnswers.answers"
                        >
                          <p class="answer">{{ answer }}</p>
                        </div>
                      </ng-container>
                      <div
                        *ngIf="section.showSpinner"
                        class="spinner-container"
                      >
                        <nz-spin
                          [nzSpinning]="section.showSpinner"
                          class="spinner mt-2"
                          nzSimple
                        ></nz-spin>
                      </div>
                    </div>
                  </div>

                  <div nz-row class="mt-2 mb-2 ml-1 mr-1 regen-container">
                    <div nz-col nzXs="16" nzSm="20" nzMd="20" nzLg="20">
                      <input
                        [(ngModel)]="section.topicInput"
                        (input)="topicInputChange(section)"
                        class="prompt-input"
                        nz-input
                        placeholder="Type here"
                        type="text"
                      />
                    </div>

                    <div nz-col nzSpan="3" class="gen-topics-btn-col">
                      <button
                        class="gen-topic-btn"
                        nz-button
                        nzType="primary"
                        nzGhost
                        (click)="generateTopics(section)"
                      >
                        Regenerate
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div
                *ngIf="section.createTopics"
                nz-row
                class="topic-container"
                style="margin-top: -2%"
              >
                <div nz-col nzSpan="24">
                  <div nz-row *ngIf="!section.deleteAll">
                    <span class="all-topic-checkbox-span">
                      <label
                        nz-checkbox
                        [(ngModel)]="section.checkAll"
                        (change)="allTopicCheck(section, $event)"
                      ></label>
                    </span>

                    <span class="ml-1">
                      <p class="topics-heading">Topics</p>
                    </span>

                    <span
                      *ngIf="section.deleteTopicIcon"
                      class="ml-1 dlt-topic-container"
                    >
                      <img
                        class="dlt-icon cursor-pointer"
                        (click)="deleteTopics(section)"
                        src="../../../../../assets/icons/delete-icon.svg"
                      />
                    </span>
                  </div>

                  <div nz-row>
                    <nz-collapse class="topic-collapse background-white">
                      <div
                        cdkDropList
                        class="example-list"
                        (cdkDropListDropped)="dropTopic($event, section.topics)"
                        (cdkDropListEntered)="topicEnter($event)"
                      >
                        <div
                          class="example-box"
                          *ngFor="let topic of section.topics; let j = index"
                        >
                          <nz-collapse-panel
                            *ngIf="!topic.delete"
                            cdkDrag
                            (cdkDragStarted)="onDragTopicStarted(topic)"
                            class="topic-collapse-panel background-white"
                            [ngClass]="{
                              'test-topic-collapse':
                                selectedContentType === courseContentType.TEST,
                              'test-collapse-extra':
                                selectedContentType === courseContentType.TEST,
                              'test-collapse-height':
                                selectedContentType === courseContentType.TEST,
                              'mt-2': j !== 0
                            }"
                            [nzHeader]="topic_header"
                            [nzActive]="topic.active"
                            [nzDisabled]="topic.disabled"
                            [nzShowArrow]="false"
                            [nzExtra]="topic_expandIcon"
                          >
                            <div
                              *ngIf="topic.topicContainer"
                              nz-row
                              class="content-type-container"
                            >
                              <div
                                *ngIf="topic.contentScreen"
                                nz-col
                                class="w-100"
                              >
                                <div class="mt-1">
                                  <p class="font-color-blue content-type-text">
                                    Select content type
                                  </p>
                                </div>
                                <div>
                                  <p class="font-color-black content-type-text">
                                    Select the main type of content. Files can
                                    be added as resource
                                  </p>
                                </div>

                                <div nz-row>
                                  <nz-card
                                    (click)="openContent(topic, 'Video')"
                                    nzHoverable
                                    class="content-card"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-video.svg"
                                      />
                                      <p class="content-types-img-text">
                                        Video
                                      </p>
                                    </div>
                                  </nz-card>
                                  <nz-card
                                    (click)="openContent(topic, 'Article')"
                                    nzHoverable
                                    class="content-card ml-2"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-article.svg"
                                      />
                                      <p class="content-types-img-text">
                                        Article
                                      </p>
                                    </div>
                                  </nz-card>
                                  <nz-card
                                    (click)="openContent(topic, 'Quiz')"
                                    nzHoverable
                                    class="content-card"
                                  >
                                    <div class="content-types-img">
                                      <img
                                        src="../../../../../assets/icons/content-quiz.svg"
                                      />
                                      <p class="content-types-img-text">Quiz</p>
                                    </div>
                                  </nz-card>
                                </div>
                              </div>

                              <div
                                *ngIf="topic.videoSection"
                                nz-col
                                nzSpan="24"
                              >
                                <div nz-row>
                                  <div *ngIf="topic.videoSection">
                                    <div class="mt-1 flex-container">
                                      <p class="topic-content-text">
                                        Content type
                                      </p>
                                      <nz-select
                                        [nzCustomTemplate]="defaultTemplate"
                                        [(ngModel)]="topic.selectedContentType"
                                        class="content-menu"
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectContentType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          *ngFor="
                                            let content of topic.contentOptions
                                          "
                                          [nzLabel]="content"
                                          [nzValue]="content"
                                        >
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeQuiz"
                                            src="../../../../../assets/icons/content-quiz.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeArticle"
                                            src="../../../../../assets/icons/content-article.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeVideo"
                                            src="../../../../../assets/icons/content-video.svg"
                                          />
                                          {{ content }}
                                        </nz-option>
                                      </nz-select>
                                      <ng-template #defaultTemplate>
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeQuiz
                                          "
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeArticle
                                          "
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeVideo
                                          "
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ topic.selectedContentType }}
                                      </ng-template>
                                    </div>
                                  </div>
                                </div>

                                <div nz-row [nzGutter]="16" class="mt-3">
                                  <div nz-col nzXs="24" nzMd="8" nzLg="8">
                                    <label class="font-color-blue"
                                      >Upload Video
                                      <span class="mandatory">*</span></label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="
                                        display: flex;
                                        align-items: stretch;
                                      "
                                    >
                                      <span
                                        class="file-name"
                                        nz-tooltip
                                        [nzTooltipTitle]="
                                          topic.video.videoData.videoFileName
                                        "
                                        nzTooltipPlacement="top"
                                        >{{
                                          topic.video.videoData.videoFileName !=
                                          "YOUTUBE"
                                            ? topic.video.videoData
                                                .videoFileName
                                            : "Add Video"
                                        }}</span
                                      >

                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleVideoChange($event, topic)
                                          "
                                          [nzCustomRequest]="customRequestVideo"
                                          [nzMultiple]="false"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span
                                              nz-icon
                                              nzType="upload"
                                            ></span>
                                            {{
                                              topic.video.videoData.videoBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>
                                    <p class="document-validation">
                                      Note: Files should be at least 720p and
                                      less than 500 MB
                                    </p>
                                  </div>
                                  <div class="or-class">OR</div>
                                  <div nz-col nzXs="24" nzMd="8" nzLg="8">
                                    <label class="font-color-blue youtube-add">
                                      Add a video from YouTube
                                    </label>
                                    <div
                                      class="uploader border-radius"
                                      style="
                                        display: flex;
                                        align-items: stretch;
                                      "
                                    >
                                      <img
                                        class="youtube-upload-icon"
                                        src="../../../../../assets/icons/youtube-ins.svg"
                                        alt="YouTube Logo"
                                      />
                                      <input
                                        class="youtube-insert"
                                        nz-input
                                        placeholder="Insert YouTube link"
                                        nzSize="large"
                                        [(ngModel)]="
                                          topic.video.videoData.youtubeVideoUrl
                                        "
                                      />
                                      <button
                                        nz-button
                                        class="upload-button border-radius border-radius h-100"
                                        (click)="youtubeVideoUrlUpload(topic)"
                                      >
                                        <span nz-icon nzType="upload"></span>
                                        Add
                                      </button>
                                    </div>
                                    <p class="document-validation">
                                      Note: Insert your YouTube's course video
                                      link
                                    </p>
                                  </div>

                                  <div nz-col nzXs="24" nzMd="7" nzLg="7">
                                    <label class="font-color-blue"
                                      >Upload Document</label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="
                                        display: flex;
                                        align-items: stretch;
                                      "
                                    >
                                      <span
                                        class="file-name"
                                        nz-tooltip
                                        [nzTooltipTitle]="
                                          topic?.video?.documentData
                                            ?.documentFileName
                                        "
                                        nzTooltipPlacement="top"
                                        >{{
                                          topic.video.documentData
                                            .documentFileName
                                        }}</span
                                      >
                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleDocumentChange($event, topic)
                                          "
                                          [nzCustomRequest]="
                                            customRequestDocument
                                          "
                                          [nzMultiple]="true"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span
                                              nz-icon
                                              nzType="upload"
                                            ></span>
                                            {{
                                              topic.video.documentData
                                                .documentBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>

                                    <p class="document-validation">
                                      Note: All file should be at least less
                                      than 500 MB
                                    </p>
                                  </div>
                                </div>

                                <div nz-row class="mt-3">
                                  <nz-table
                                    *ngIf="topic.video.showTable"
                                    nzTemplateMode
                                    class="w-100 table-class"
                                  >
                                    <thead>
                                      <tr>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          File Name
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          File Type
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          Status
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          Date
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          Transcript
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          Summary
                                        </th>
                                        <th
                                          class="thead-color tr-border-bottom"
                                        >
                                          Actions
                                        </th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr
                                        *ngIf="
                                          topic.video.videoData.videoFileType
                                        "
                                      >
                                        <ng-container
                                          *ngIf="!topic.video.videoData.delete"
                                        >
                                          <td class="tr-border-bottom">
                                            {{
                                              topic.video.videoData
                                                .videoFileName
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{
                                              topic.video.videoData
                                                .videoFileType
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <div
                                              class="container"
                                              *ngIf="
                                                topic.video.videoData
                                                  .videoProgress > 0 &&
                                                topic.video.videoData
                                                  .videoProgress != 100
                                              "
                                            >
                                              <div class="bar"></div>
                                            </div>
                                            <div class="progress-bar">
                                              <nz-progress
                                                *ngIf="
                                                  topic.video.videoData
                                                    .videoProgress == 100
                                                "
                                                [nzStrokeColor]="'#00BA00'"
                                                [nzPercent]="
                                                  topic.video.videoData
                                                    .videoProgress
                                                "
                                                nzSize="small"
                                              ></nz-progress>
                                            </div>
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ topic.video.videoData.date }}
                                          </td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              videoTranscriptModal(
                                                topic.video.videoData
                                              )
                                            "
                                          >
                                            {{
                                              topic.video.videoData
                                                .videoProgress == 100
                                                ? "View/Edit Transcript"
                                                : "-"
                                            }}
                                          </td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              videoSummaryModal(
                                                topic.video.videoData
                                              )
                                            "
                                          >
                                            {{
                                              topic.video.videoData
                                                .videoProgress == 100
                                                ? "View/Edit Summary"
                                                : "-"
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <img
                                              *ngIf="
                                                topic.video.videoData
                                                  .videoProgress == 100
                                              "
                                              (click)="deleteVideoData(topic)"
                                              class="dlt-icon cursor-pointer"
                                              src="../../../../../assets/icons/delete-icon.svg"
                                            />
                                          </td>
                                        </ng-container>
                                      </tr>
                                      <tr
                                        *ngFor="
                                          let document of topic.video
                                            .documentData.documents;
                                          let k = index
                                        "
                                      >
                                        <ng-container *ngIf="!document.delete">
                                          <td class="tr-border-bottom">
                                            {{ document.documentFileName }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ document.documentFileType }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <div
                                              class="container"
                                              *ngIf="
                                                document?.documentProgress >
                                                  0 &&
                                                document?.documentProgress !=
                                                  100
                                              "
                                            >
                                              <div class="bar"></div>
                                            </div>
                                            <div class="progress-bar">
                                              <nz-progress
                                                *ngIf="
                                                  document?.documentProgress ==
                                                  100
                                                "
                                                [nzStrokeColor]="'#00BA00'"
                                                [nzPercent]="
                                                  document?.documentProgress
                                                "
                                                nzSize="small"
                                              ></nz-progress>
                                            </div>
                                          </td>
                                          <td class="tr-border-bottom">
                                            {{ document?.date }}
                                          </td>
                                          <td class="tr-border-bottom"></td>
                                          <td
                                            class="tr-border-bottom trans-sum-color"
                                            (click)="
                                              documentSummaryModal(document)
                                            "
                                          >
                                            {{
                                              document?.documentProgress == 100
                                                ? "View/Edit Summary"
                                                : "-"
                                            }}
                                          </td>
                                          <td class="tr-border-bottom">
                                            <img
                                              (click)="deleteDocument(topic, k)"
                                              *ngIf="
                                                document.documentProgress ===
                                                100
                                              "
                                              class="dlt-icon cursor-pointer"
                                              src="../../../../../assets/icons/delete-icon.svg"
                                            />
                                          </td>
                                        </ng-container>
                                      </tr>
                                    </tbody>
                                  </nz-table>
                                </div>

                                <div
                                  nz-row
                                  class="w-100 mt-2 justify-content-center"
                                >
                                  <button
                                    [class.quiz-save-btn-disable]="
                                      !topic.validate
                                    "
                                    class="quiz-save-btn cursor-pointer"
                                    nz-button
                                    nzType="primary"
                                    nzGhost
                                    (click)="saveVideo(topic)"
                                  >
                                    Save
                                  </button>
                                </div>
                              </div>

                              <div
                                *ngIf="topic.articleSection"
                                nz-col
                                nzSpan="24"
                              >
                                <div class="article-content" nz-row>
                                  <div
                                    *ngIf="topic.articleSection"
                                    class="mt-1 flex-container"
                                  >
                                    <p class="topic-content-text">
                                      Content type
                                    </p>
                                    <nz-select
                                      class="font-color-black"
                                      [nzCustomTemplate]="defaultTemplate"
                                      [(ngModel)]="topic.selectedContentType"
                                      class="content-menu"
                                      [nzSize]="'large'"
                                      nzPlaceHolder="quiz"
                                      (ngModelChange)="
                                        onSelectContentType(topic)
                                      "
                                    >
                                      <nz-option
                                        nzCustomContent
                                        *ngFor="
                                          let content of topic.contentOptions
                                        "
                                        [nzLabel]="content"
                                        [nzValue]="content"
                                      >
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeQuiz"
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeArticle"
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="content == typeVideo"
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ content }}
                                      </nz-option>
                                    </nz-select>
                                    <ng-template #defaultTemplate>
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType == typeQuiz
                                        "
                                        src="../../../../../assets/icons/content-quiz.svg"
                                      />
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType ==
                                          typeArticle
                                        "
                                        src="../../../../../assets/icons/content-article.svg"
                                      />
                                      <img
                                        class="dropdown-menu-icon"
                                        *ngIf="
                                          topic.selectedContentType == typeVideo
                                        "
                                        src="../../../../../assets/icons/content-video.svg"
                                      />
                                      {{ topic.selectedContentType }}
                                    </ng-template>
                                  </div>

                                  <div class="mt-4 ml-2">
                                    <button
                                      class="own-article-btn font-color-blue"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="
                                        openUploadArticleScreen(topic.article)
                                      "
                                    >
                                      <span
                                        nz-icon
                                        nzType="plus"
                                        nzTheme="outline"
                                      ></span>
                                      Add own Article
                                    </button>
                                  </div>

                                  <div
                                    *ngIf="topic.article.generateArticleBtn"
                                    class="mt-4 ml-2"
                                  >
                                    <button
                                      class="gen-article-btn"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="openArticlePrompt(topic.article)"
                                    >
                                      Generate Article
                                    </button>
                                  </div>
                                </div>

                                <div
                                  *ngIf="topic.article.articlePrompt"
                                  nz-row
                                  class="mt-2 mb-2 ml-2 mr-1 regen-container border-radius"
                                >
                                  <div
                                    nz-col
                                    nzXs="16"
                                    nzSm="16"
                                    nzMd="17"
                                    nzLg="19"
                                  >
                                    <input
                                      [(ngModel)]="
                                        topic.article.articlePromptInput
                                      "
                                      (input)="
                                        articleInputChange(topic.article)
                                      "
                                      class="prompt-input"
                                      nz-input
                                      placeholder="Type here"
                                      type="text"
                                    />
                                  </div>

                                  <div
                                    nz-col
                                    nzSpan="4"
                                    class="gen-topics-btn-col"
                                  >
                                    <button
                                      [class.disable-generate-topics-prompt]="
                                        !topic.article.articlePromptInput
                                      "
                                      class="gen-topic-btn cursor-pointer"
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="generateArticles(topic.article)"
                                    >
                                      Generate Article
                                    </button>
                                  </div>
                                </div>

                                <div
                                  nz-row
                                  *ngIf="topic.article.showChatBox"
                                  class="chat-box-row mt-2 ml-2 mr-2"
                                >
                                  <div nz-col nzSpan="24">
                                    <div nz-row class="ml-1 mr-1 mt-1">
                                      <div
                                        nz-col
                                        nzSpan="1"
                                        class="avatar-container"
                                      >
                                        <nz-avatar
                                          class="icon user-icon"
                                          [nzText]="
                                            getInitialOfLoggedInUser
                                              | initialCharactor
                                          "
                                          nzAlt="Profile"
                                        ></nz-avatar>
                                      </div>

                                      <div
                                        nz-col
                                        nzSpan="21"
                                        class="question-container"
                                      >
                                        <p class="question">
                                          {{
                                            topic.article.questionAnswers
                                              .question
                                          }}
                                        </p>
                                      </div>
                                      <div
                                        nz-col
                                        nzSpan="2"
                                        class="question-container"
                                      >
                                        <p
                                          *ngIf="
                                            topic.article.questionAnswers
                                              .answers.length != 0
                                          "
                                          class="clear-all"
                                          (click)="
                                            clearArticleChat(topic.article)
                                          "
                                        >
                                          Clear All
                                        </p>
                                      </div>
                                    </div>

                                    <div nz-row class="ml-1 mr-1 mt-1">
                                      <div
                                        nz-col
                                        nzSpan="1"
                                        class="avatar-container"
                                      >
                                        <nz-avatar
                                          class="icon ai-icon"
                                          nzText="AI"
                                          nzSrc=""
                                          nzAlt="AI"
                                        ></nz-avatar>
                                      </div>

                                      <div
                                        nz-col
                                        nzSpan="22"
                                        class="answer-container"
                                      >
                                        <ng-container
                                          *ngIf="
                                            topic.article.questionAnswers
                                              .answers
                                          "
                                        >
                                          <div
                                            class="mt-1"
                                            *ngFor="
                                              let answer of topic.article
                                                .questionAnswers.answers
                                            "
                                          >
                                            <p class="answer">{{ answer }}</p>
                                          </div>
                                        </ng-container>
                                        <div
                                          *ngIf="topic.article.showSpinner"
                                          class="spinner-container"
                                        >
                                          <nz-spin
                                            [nzSpinning]="
                                              topic.article.showSpinner
                                            "
                                            class="spinner mt-2"
                                            nzSimple
                                          ></nz-spin>
                                        </div>
                                      </div>
                                    </div>

                                    <div
                                      nz-row
                                      class="mt-2 mb-2 ml-1 mr-1 regen-container"
                                    >
                                      <div
                                        nz-col
                                        nz-col
                                        nzXs="16"
                                        nzSm="16"
                                        nzMd="17"
                                        nzLg="19"
                                      >
                                        <input
                                          [(ngModel)]="
                                            topic.article.articlePromptInput
                                          "
                                          (input)="topicInputChange(section)"
                                          class="prompt-input"
                                          nz-input
                                          placeholder="Type here"
                                          type="text"
                                        />
                                      </div>

                                      <div
                                        nz-col
                                        nzSpan="4"
                                        class="gen-topics-btn-col"
                                      >
                                        <button
                                          class="gen-topic-btn"
                                          nz-button
                                          nzType="primary"
                                          nzGhost
                                          (click)="
                                            generateArticles(topic.article)
                                          "
                                        >
                                          Regenerate
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                <div
                                  nz-row
                                  class="mt-1 ml-2"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <div nz-col nzXs="24" nzMd="14" nzLg="14">
                                    <label class="font-color-blue"
                                      >Upload Document</label
                                    >
                                    <div
                                      class="uploader border-radius"
                                      style="
                                        display: flex;
                                        align-items: stretch;
                                      "
                                    >
                                      <span class="file-name">{{
                                        topic.article.articleFileName
                                      }}</span>
                                      <span class="file-upload-span">
                                        <nz-upload
                                          (nzChange)="
                                            handleArticleDocumentChange(
                                              $event,
                                              topic
                                            )
                                          "
                                          [nzCustomRequest]="
                                            customRequestArticleDocument
                                          "
                                          [nzMultiple]="true"
                                          [nzShowUploadList]="false"
                                        >
                                          <button
                                            nz-button
                                            class="upload-button border-radius border-radius h-100"
                                          >
                                            <span
                                              nz-icon
                                              nzType="upload"
                                            ></span>
                                            {{
                                              topic.video.documentData
                                                .documentBtnName
                                            }}
                                          </button>
                                        </nz-upload>
                                      </span>
                                    </div>

                                    <p class="document-validation">
                                      Note: File should be at least less than
                                      4.0 GB
                                    </p>
                                  </div>

                                  <ng-container
                                    *ngIf="topic.article.articleSummary != ''"
                                  >
                                    <div class="mt-1 ml-2">
                                      <div class="flex-container">
                                        <label class="font-color-blue"
                                          >Summary</label
                                        >
                                        <label
                                          class="font-color-black cursor-pointer mt-4"
                                          (click)="
                                            articleSummaryModal(topic.article)
                                          "
                                        >
                                          View/Edit summary</label
                                        >
                                      </div>
                                    </div>

                                    <div class="mt-1 ml-4">
                                      <div class="flex-container">
                                        <label class="font-color-blue"
                                          >Actions</label
                                        >
                                        <img
                                          class="dlt-icon cursor-pointer mt-4"
                                          src="../../../../../assets/icons/delete-icon.svg"
                                          (click)="deleteArticleDocument(topic)"
                                        />
                                      </div>
                                    </div>
                                  </ng-container>
                                </div>

                                <div
                                  class="bar ml-2"
                                  *ngIf="topic.article.articleProgressBar"
                                ></div>

                                <div
                                  nz-row
                                  class="mt-3 ml-2 mr-1"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <div nz-col nzSpan="24">
                                    <angular-editor
                                      [(ngModel)]="topic.article.content"
                                      [config]="editorConfig"
                                      [placeholder]="'Insert'"
                                      (ngModelChange)="
                                        editorArticleContentChanged(
                                          $event,
                                          topic
                                        )
                                      "
                                    ></angular-editor>
                                  </div>
                                </div>

                                <div
                                  nz-row
                                  class="w-100 mt-2 justify-content-center"
                                  *ngIf="topic.article.uploadArticleDocument"
                                >
                                  <button
                                    class="quiz-save-btn"
                                    nz-button
                                    nzType="primary"
                                    nzGhost
                                    [class.quiz-save-btn-disable]="
                                      !topic.validate
                                    "
                                    (click)="saveArticle(topic)"
                                  >
                                    Save
                                  </button>
                                </div>
                              </div>

                              <div nz-col nzSpan="24">
                                <div nz-row>
                                  <div
                                    *ngIf="topic.quizSection"
                                    class="display-flex w-100"
                                  >
                                    <div
                                      class="mt-1 flex-container"
                                      *ngIf="
                                        selectedContentType !=
                                        courseContentType.TEST
                                      "
                                    >
                                      <p class="topic-content-text">
                                        Content type
                                      </p>
                                      <nz-select
                                        [nzCustomTemplate]="defaultTemplate"
                                        [(ngModel)]="topic.selectedContentType"
                                        class="content-menu"
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectContentType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          *ngFor="
                                            let content of topic.contentOptions
                                          "
                                          [nzLabel]="content"
                                          [nzValue]="content"
                                        >
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeQuiz"
                                            src="../../../../../assets/icons/content-quiz.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeArticle"
                                            src="../../../../../assets/icons/content-article.svg"
                                          />
                                          <img
                                            class="dropdown-menu-icon"
                                            *ngIf="content == typeVideo"
                                            src="../../../../../assets/icons/content-video.svg"
                                          />
                                          {{ content }}
                                        </nz-option>
                                      </nz-select>
                                      <ng-template #defaultTemplate>
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeQuiz
                                          "
                                          src="../../../../../assets/icons/content-quiz.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeArticle
                                          "
                                          src="../../../../../assets/icons/content-article.svg"
                                        />
                                        <img
                                          class="dropdown-menu-icon"
                                          *ngIf="
                                            topic.selectedContentType ==
                                            typeVideo
                                          "
                                          src="../../../../../assets/icons/content-video.svg"
                                        />
                                        {{ topic.selectedContentType }}
                                      </ng-template>
                                    </div>

                                    <div
                                      class="mt-1 flex-container quiz-duration"
                                      [class.ml-4]="
                                        selectedContentType ==
                                        courseContentType.COURSE
                                      "
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Quiz duration
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="00 Min"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="
                                          topic.quiz.durationInMinutes
                                        "
                                        min="0"
                                        (keypress)="
                                          validateNumberInput(
                                            $event,
                                            false,
                                            false,
                                            false
                                          )
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>

                                    <div
                                      class="mt-1 ml-4 flex-container quiz-duration"
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Passing criteria
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="0%"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="topic.quiz.passingCriteria"
                                        min="0"
                                        max="100"
                                        (keypress)="
                                          validateNumberInput(
                                            $event,
                                            false,
                                            true,
                                            false
                                          )
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>

                                    <div
                                      class="mt-1 ml-4 flex-container"
                                      *ngIf="
                                        selectedContentType ==
                                        courseContentType.TEST
                                      "
                                    >
                                      <p
                                        class="topic-content-text color-black pl-0"
                                      >
                                        Randomly Select Questions
                                      </p>
                                      <nz-select
                                        [(ngModel)]="
                                          topic.quiz.randomQuestionType
                                        "
                                        [nzSize]="'large'"
                                        nzPlaceHolder="quiz"
                                        (ngModelChange)="
                                          onSelectRandomQuestionType(topic)
                                        "
                                      >
                                        <nz-option
                                          nzCustomContent
                                          [nzLabel]="'All'"
                                          [nzValue]="'All'"
                                        >
                                          All
                                        </nz-option>
                                        <nz-option
                                          nzCustomContent
                                          [nzLabel]="'Custom'"
                                          [nzValue]="'Custom'"
                                        >
                                          Custom
                                        </nz-option>
                                      </nz-select>
                                    </div>

                                    <div
                                      *ngIf="
                                        topic.quiz.randomQuestionType ==
                                        randomQuestionCustom
                                      "
                                      class="mt-1 ml-4 flex-container quiz-duration"
                                    >
                                      <p
                                        class="topic-content-text color-black padding-0"
                                      >
                                        Number
                                      </p>
                                      <input
                                        class="border-radius"
                                        nz-input
                                        placeholder="1"
                                        nzSize="large"
                                        type="number"
                                        [(ngModel)]="topic.quiz.randomQuestion"
                                        min="1"
                                        max="100"
                                        (keypress)="
                                          validateRandomNumberInput(
                                            $event,
                                            topic
                                          )
                                        "
                                        (ngModelChange)="quizValidation(topic)"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                      />
                                    </div>
                                  </div>
                                </div>

                                <ng-container *ngIf="topic.quizSection">
                                  <div
                                    nz-row
                                    class="mt-2"
                                    *ngIf="
                                      selectedContentType !=
                                      courseContentType.TEST
                                    "
                                  >
                                    <div nz-col nzSpan="24">
                                      <div nz-row class="switch-container">
                                        <p class="section-name font-16">
                                          Quiz Title
                                        </p>
                                        <p class="mandatory">*</p>
                                      </div>
                                      <div nz-row class="mt--1">
                                        <input
                                          (keyup)="onQuizInputChange(topic)"
                                          [(ngModel)]="topic.quiz.title"
                                          nz-input
                                          placeholder="Quiz title"
                                          nzSize="large"
                                        />
                                      </div>
                                    </div>
                                  </div>

                                  <div class="mt-2">
                                    <div
                                      cdkDropList
                                      class="example-list"
                                      (cdkDropListDropped)="
                                        dropQuizQuestion(
                                          $event,
                                          topic,
                                          topic.quiz.questions
                                        )
                                      "
                                      (cdkDropListEntered)="
                                        quizQuestionEnter($event)
                                      "
                                    >
                                      <ng-container
                                        *ngFor="
                                          let question of topic.quiz.questions;
                                          let i = index
                                        "
                                      >
                                        <div
                                          class="example-box test-question-outer-container border-radius mt-4"
                                          *ngIf="!question.delete"
                                        >
                                          <div cdkDrag class="w-100">
                                            <div
                                              nz-row
                                              class="switch-container mt-1"
                                            >
                                              <div
                                                cdkDragHandle
                                                class="quiz-question-drag-container display-inline-block cursor-pointer"
                                              >
                                                <img
                                                  src="../../../../../assets/icons/topic-drag.svg"
                                                  alt=""
                                                />
                                              </div>
                                              <p class="section-name font-16">
                                                {{ question.label }}
                                              </p>
                                              <p class="mandatory">*</p>
                                            </div>
                                            <div nz-row class="mt--1">
                                              <div class="quiz-quest-with-dlt">
                                                <input
                                                  (keyup)="
                                                    onQuizInputChange(topic)
                                                  "
                                                  [(ngModel)]="question.ques"
                                                  nz-input
                                                  placeholder="Let's ask a question"
                                                  nzSize="large"
                                                  maxlength="500"
                                                  (keydown)="
                                                    preventEmoji($event)
                                                  "
                                                  (paste)="
                                                    preventEmojiOnPaste($event)
                                                  "
                                                />
                                                <small
                                                  style="color: red"
                                                  class="text-danger"
                                                  *ngIf="
                                                    question.ques?.length ===
                                                    500
                                                  "
                                                >
                                                  Youve reached the 500
                                                  character limit.
                                                </small>
                                              </div>

                                              <div
                                                class="quiz-question-type ml-2"
                                              >
                                                <nz-select
                                                  [nzCustomTemplate]="
                                                    selected_quest_type_icon
                                                  "
                                                  class="w-100"
                                                  [nzSize]="'large'"
                                                  nzPlaceHolder="Select type"
                                                  [(ngModel)]="
                                                    question.questionType
                                                  "
                                                  (ngModelChange)="
                                                    changeQuestionType(
                                                      topic,
                                                      question
                                                    )
                                                  "
                                                >
                                                  <nz-option
                                                    nzCustomContent
                                                    *ngFor="
                                                      let questionType of questionTypes
                                                    "
                                                    [nzLabel]="
                                                      questionType?.value
                                                    "
                                                    [nzValue]="questionType"
                                                  >
                                                    <div
                                                      class="display-inline-flex quest-type-menu-icon"
                                                    >
                                                      <img
                                                        [attr.src]="
                                                          questionType?.src
                                                        "
                                                        [ngStyle]="{
                                                          height:
                                                            questionType?.key ===
                                                            questionType?.TRUE_FALSE
                                                              ? '7px'
                                                              : '9px'
                                                        }"
                                                      />
                                                    </div>
                                                    <span>{{
                                                      questionType?.value
                                                    }}</span>
                                                  </nz-option>

                                                  <ng-template
                                                    #selected_quest_type_icon
                                                  >
                                                    <img
                                                      style="height: 13px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key ==
                                                        questionType.MULTIPLE_CHOICE
                                                      "
                                                      src="../../../../../assets/icons/multiple_choice.svg"
                                                    />
                                                    <img
                                                      style="height: 13px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key ==
                                                        'SINGLE_CHOICE'
                                                      "
                                                      src="../../../../../assets/icons/single_choice.svg"
                                                    />
                                                    <img
                                                      style="height: 9px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key == 'TRUE_FALSE'
                                                      "
                                                      src="../../../../../assets/icons/tf.svg"
                                                    />
                                                    <img
                                                      style="height: 7px"
                                                      *ngIf="
                                                        question?.questionType
                                                          ?.key == 'TEXT_FIELD'
                                                      "
                                                      src="../../../../../assets/icons/text_field.svg"
                                                    />
                                                    {{
                                                      question?.questionType
                                                        ?.value
                                                    }}
                                                  </ng-template>
                                                </nz-select>
                                              </div>

                                              <button
                                                (click)="
                                                  removeQuizQuestion(
                                                    topic,
                                                    question
                                                  )
                                                "
                                                class="action-delete border-radius cursor-pointer ml-2"
                                              >
                                                <span
                                                  class="action-icon font-16"
                                                  nz-icon
                                                  nzType="delete"
                                                  nzTheme="fill"
                                                ></span>
                                              </button>

                                              <div
                                                *ngIf="
                                                  i ===
                                                  topic.quiz.questions.length -
                                                    1
                                                "
                                                class="ml-1 addQuesBtn-cont text-align-center"
                                              ></div>
                                            </div>

                                            <div nz-row class="mt-1">
                                              <ng-container
                                                *ngIf="
                                                  question?.questionType?.key !=
                                                  questionType.TRUE_FALSE
                                                "
                                              >
                                                <ng-container
                                                  *ngFor="
                                                    let answer of question?.answers;
                                                    let j = index
                                                  "
                                                >
                                                  <div
                                                    *ngIf="!answer.delete"
                                                    class="display-flex w-100"
                                                  >
                                                    <div
                                                      nz-col
                                                      class="mt-1 quiz-answers-section"
                                                    >
                                                      <nz-input-group
                                                        class="answer-input-group"
                                                        [nzSuffix]="
                                                          delete_answer
                                                        "
                                                        [nzAddOnBefore]="
                                                          answer_order
                                                        "
                                                      >
                                                        <input
                                                          class="answer-input"
                                                          (keyup)="
                                                            onQuizInputChange(
                                                              topic
                                                            )
                                                          "
                                                          [(ngModel)]="
                                                            answer.ans
                                                          "
                                                          (ngModelChange)="
                                                            quizOptions(
                                                              question,
                                                              j
                                                            )
                                                          "
                                                          nz-input
                                                          placeholder="Option {{
                                                            answer.label
                                                          }}"
                                                          nzSize="large"
                                                        />

                                                        <ng-template
                                                          #answer_order
                                                        >
                                                          <span
                                                            *ngIf="answer?.ans"
                                                            >{{
                                                              answer?.answerOrder
                                                            }}
                                                            .</span
                                                          >
                                                        </ng-template>

                                                        <ng-template
                                                          #delete_answer
                                                        >
                                                          <span
                                                            class="cursor-pointer"
                                                            style="color: red"
                                                            nz-icon
                                                            nzType="close"
                                                            nzTheme="outline"
                                                            (click)="
                                                              removeQuizQuestionAnswers(
                                                                topic,
                                                                question,
                                                                answer
                                                              )
                                                            "
                                                          ></span>
                                                        </ng-template>
                                                      </nz-input-group>
                                                    </div>
                                                  </div>

                                                  <div
                                                    *ngIf="
                                                      j ===
                                                      question.answers.length -
                                                        1
                                                    "
                                                    nz-row
                                                    class="mt-1 w-100"
                                                  ></div>
                                                </ng-container>
                                              </ng-container>
                                            </div>

                                            <div
                                              *ngIf="
                                                question?.questionType?.key !=
                                                questionType.TRUE_FALSE
                                              "
                                              nz-row
                                              class="mt-2"
                                            >
                                              <button
                                                class="add-opt-btn"
                                                nz-button
                                                nzType="primary"
                                                nzGhost
                                                (click)="
                                                  addOption(topic, question)
                                                "
                                              >
                                                <span
                                                  nz-icon
                                                  nzType="plus"
                                                  nzTheme="outline"
                                                ></span>
                                                Add an option
                                              </button>
                                            </div>

                                            <div nz-row class="mt-3">
                                              <p class="font-color-black">
                                                Correct answer
                                              </p>
                                            </div>

                                            <div
                                              class="answer-row"
                                              nz-row
                                              *ngIf="true"
                                            >
                                              <ng-container
                                                *ngFor="
                                                  let answer of questionShowAnswers(
                                                    question.answers
                                                  );
                                                  let k = index
                                                "
                                              >
                                                <span
                                                  *ngIf="
                                                    !answer.delete &&
                                                    answer.ans &&
                                                    !answer?.exist
                                                  "
                                                  class="answer-option-span cursor-pointer"
                                                  (click)="
                                                    markCorrectAnswer(
                                                      topic,
                                                      question,
                                                      answer
                                                    )
                                                  "
                                                  [ngClass]="{
                                                    'correct-answer':
                                                      answer?.isCorrectAnswer
                                                  }"
                                                >
                                                  {{
                                                    question?.questionType
                                                      ?.key ==
                                                    questionType.TRUE_FALSE
                                                      ? (answer?.ans
                                                        | slice : 0 : 1)
                                                      : answer?.answerOrder
                                                  }}
                                                </span>
                                              </ng-container>
                                            </div>

                                            <div nz-row class="mt-2">
                                              <p>Explanation (Optional)</p>
                                              <textarea
                                                rows="4"
                                                nz-input
                                                placeHolder="Write explanation here"
                                                [(ngModel)]="
                                                  question.explanation
                                                "
                                                (keydown)="preventEmoji($event)"
                                                (paste)="
                                                  preventEmojiOnPaste($event)
                                                "
                                              ></textarea>
                                            </div>
                                          </div>
                                        </div>
                                      </ng-container>
                                    </div>

                                    <div nz-row class="mt-2 mb-2">
                                      <button
                                        class="test-add-ques-btn"
                                        nz-button
                                        nzType="primary"
                                        nzGhost
                                        (click)="
                                          addQuestion(
                                            topic,
                                            topic.quiz.questions
                                          )
                                        "
                                      >
                                        <span
                                          nz-icon
                                          nzType="plus"
                                          nzTheme="outline"
                                        ></span>
                                        Add a question
                                      </button>
                                    </div>
                                  </div>

                                  <div
                                    nz-row
                                    class="w-100 mt-2 justify-content-center"
                                  >
                                    <button
                                      class="quiz-save-btn"
                                      [class.quiz-save-btn-disable]="
                                        !topic.validate
                                      "
                                      nz-button
                                      nzType="primary"
                                      nzGhost
                                      (click)="saveQuiz(topic)"
                                    >
                                      Save
                                    </button>
                                  </div>
                                </ng-container>
                              </div>
                            </div>

                            <ng-template #topic_header>
                              <div
                                style="width: 70%; height: 145px"
                                (click)="topicActive($event, topic)"
                              >
                                <div class="background-white">
                                  <div
                                    class="display-inline-block bg-ECF1FF border-radius"
                                    style="width: 25%"
                                  >
                                    <div
                                      cdkDragHandle
                                      class="topic-drag-container display-inline-block cursor-pointer"
                                    >
                                      <img
                                        class="h-100"
                                        src="../../../../../assets/icons/section-test-drag.svg"
                                      />
                                    </div>

                                    <div
                                      class="single-topic-checkbox display-inline-block"
                                      (click)="sectionActive($event)"
                                    >
                                      <label
                                        nz-checkbox
                                        [(ngModel)]="topic.checkTopic"
                                        (change)="
                                          singleTopicCheck(
                                            section,
                                            topic,
                                            $event
                                          )
                                        "
                                      ></label>
                                    </div>

                                    <span
                                      (click)="topicActive($event, topic)"
                                      class="font-bold font-20 pl-4"
                                    >
                                      Topic {{ topic.level }}
                                    </span>
                                  </div>
                                </div>

                                <div class="test-topic-input bg-ECF1FF">
                                  <input
                                    [(ngModel)]="topic.name"
                                    class="test-section-name-input font-color-black background-white ml-2 mt-2"
                                    [ngClass]="{
                                      'border-none':
                                        selectedContentType ===
                                        courseContentType.TEST
                                    }"
                                    nz-input
                                    placeholder="Topic name *"
                                    type="text"
                                    maxlength="100"
                                    (click)="sectionActive($event)"
                                    (keydown)="preventEmoji($event)"
                                    (paste)="preventEmojiOnPaste($event)"
                                  />
                                  <!-- <nz-input-group
                                  class="w-40 ml-2"
                                  [nzPrefix]="suffixIconSearch"
                                >
                                  <input
                                    [(ngModel)]="topic.name"
                                    (keyup)="topicPromptKeyUp(topic)"
                                    (click)="stopCollapse($event)"
                                    class="prompt-input topic-input font-color-blue"
                                    type="text"
                                    nz-input
                                    placeholder="Topic name"
                                    maxlength="100"
                                    (keydown)="preventEmoji($event)"
                                    (paste)="preventEmojiOnPaste($event)"
                                  />
                                </nz-input-group>
                                <ng-template #suffixIconSearch>
                                  <img
                                    *ngIf="topic.name"
                                    class="topic-complete-img"
                                    [src]="topic.topicStatusImg"
                                  />
                                </ng-template> -->
                                </div>
                              </div>
                            </ng-template>

                            <ng-template #topic_expandIcon>
                              <div
                                nz-row
                                (click)="sectionActive($event)"
                                class="switch-container background-white ml-auto w-100"
                                style="height: 51px"
                                [class.background-white]="
                                  selectedContentType == courseContentType.TEST
                                "
                              >
                                <div
                                  class="test-add-section-btn display-flex justify-content-center align-items-center cursor-pointer w-100 bg-ECF1FF"
                                  (click)="createTopics(section)"
                                >
                                  <span
                                    nz-icon
                                    nzType="plus"
                                    nzTheme="outline"
                                    class="color-blue"
                                  ></span>
                                  Add new topic
                                </div>
                              </div>

                              <div
                                nz-row
                                class="w-100"
                                class="test-section-access"
                              >
                                <div
                                  [ngStyle]="{
                                    position:
                                      courseInformationData?.value
                                        ?.courseType == courseType.PREMIUM
                                        ? 'absolute'
                                        : 'relative',
                                    right:
                                      courseInformationData?.value
                                        ?.courseType === courseType.PREMIUM
                                        ? '2%'
                                        : '10px'
                                  }"
                                  class="display-inline-block ml-auto"
                                  (click)="topicActive($event, topic)"
                                >
                                  <img
                                    *ngIf="!topic.active"
                                    src="../../../../../assets/icons/test-topic-down-arrow.svg"
                                  />
                                  <img
                                    *ngIf="topic.active"
                                    src="../../../../../assets/icons/test-topic-up-arrow.svg"
                                  />
                                </div>
                              </div>
                            </ng-template>
                          </nz-collapse-panel>
                        </div>
                      </div>
                    </nz-collapse>
                  </div>
                </div>
              </div>

              <!-- <div nz-row class="mt-1 margin-class">
                <div nz-col class="mb-1">
                  <button
                    class="own-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    (click)="createTopics(section)"
                  >
                    <span nz-icon nzType="plus" nzTheme="outline"></span>
                    Add topic
                  </button>
                </div>

                <div nz-col class="ml-2">
                  <button
                    *ngIf="section.generateTopicBtn1"
                    class="gen-topic-btn"
                    nz-button
                    nzType="primary"
                    nzGhost
                    (click)="showGenerateTopicsPrompt(section)"
                  >
                    Generate topics
                  </button>
                </div>
              </div> -->

              <ng-template #header>
                <div class="test-section-header" (click)="sectionActiveStatus($event, section)">
                  <div
                    class="display-flex bg-ECF1FF"
                    [class.test-header]="
                      selectedContentType == courseContentType.TEST
                    "
                  >
                    <div
                      class="background-white display-flex border-radius section-drag-and-label"
                    >
                      <div cdkDragHandle class="section-drag-container">
                        <img
                          class="section-test-drag"
                          src="../../../../../assets/icons/section-test-drag.svg"
                        />
                      </div>
                      <div class="single-section-checkbox content-center" (click)="sectionActive($event)">
                        <label
                          nz-checkbox
                          [(ngModel)]="section.checkSection"
                          (change)="singleSectionCheck(section, $event)"
                        ></label>
                      </div>
                      <div class="ml-2 content-center">
                        <p
                          class="section-number color-blue"
                          nz-tooltip="{{ section.name }}"
                        >
                          Section {{ section.level }}
                          <!-- {{
                          section?.name?.length > 40
                            ? section?.name?.substring(0, 39) + "..."
                            : section?.name
                        }} -->
                        </p>
                      </div>
                    </div>
                  </div>

                  <div class="background-white">
                    <input
                      [(ngModel)]="section.name"
                      class="test-section-name-input font-color-black ml-2 mt-2"
                      [ngClass]="{
                        'bg-ECF1FF':
                          selectedContentType === courseContentType.TEST,
                        'border-none':
                          selectedContentType === courseContentType.TEST
                      }"
                      nz-input
                      placeholder="Section name *"
                      type="text"
                      maxlength="100"
                      (click)="sectionActive($event)"
                      (keydown)="preventEmoji($event)"
                      (paste)="preventEmojiOnPaste($event)"
                    />
                  </div>
                </div>
              </ng-template>
              <ng-template #expandIcon>
                <div
                  nz-row
                  class="switch-container bg-ECF1FF ml-auto w-100"
                  style="height: 45px"
                  [class.background-white]="
                    selectedContentType == courseContentType.TEST
                  "
                  (click)="sectionActive($event)"
                >
                  <div
                    class="test-add-section-btn display-flex justify-content-center align-items-center cursor-pointer w-100 background-white"
                    (click)="addSection()"
                  >
                    <span
                      nz-icon
                      nzType="plus"
                      nzTheme="outline"
                      class="color-blue"
                    ></span>
                    Add new section
                  </div>
                </div>

                <div nz-row class="w-100" class="test-section-access mr-2">
                  <div
                    *ngIf="
                      courseInformationData?.value?.courseType !==
                      courseType.PREMIUM
                    "
                    class="display-inline-block"
                  >
                    <p class="Student-access">Free Student Access</p>
                  </div>
                  <div
                    *ngIf="
                      courseInformationData?.value?.courseType !==
                      courseType.PREMIUM
                    "
                    class="display-inline-block"
                    style="margin-left: 10px"
                  >
                    <nz-switch
                      class="section-switch"
                      [(ngModel)]="section.switchValue"
                      (click)="sectionActive($event)"
                    ></nz-switch>
                  </div>
                  <div
                    [ngStyle]="{
                      position:
                        courseInformationData?.value?.courseType ==
                        courseType.PREMIUM
                          ? 'absolute'
                          : 'relative',
                      right:
                        courseInformationData?.value?.courseType ===
                        courseType.PREMIUM
                          ? '5%'
                          : '0px'
                    }"
                    class="display-inline-block"
                    style="margin-left: 10px"
                    (click)="sectionActiveStatus($event, section)"
                  >
                    <img
                      *ngIf="!section.active"
                      src="../../../../../assets/icons/test-section-down-arrow.svg"
                    />
                    <img
                      *ngIf="section.active"
                      src="../../../../../assets/icons/test-section-up-arrow.svg"
                    />
                  </div>
                </div>
              </ng-template>
            </nz-collapse-panel>
          </div>
        </ng-container>
      </div>
    </nz-collapse>
  </div>

  <!-- <div nz-row class="mt-1">
    <div nz-col nzSpan="4">
      <button
        class="addSectionBtn"
        nz-button
        nzType="primary"
        nzGhost
        (click)="addSection()"
      >
        <span nz-icon nzType="plus" nzTheme="outline"></span>
        Section
      </button>
    </div>
  </div> -->
</ng-container>

<div nz-row class="mt-3 justify-content">
  <div nz-col>
    <button
      class="backBtn"
      nz-button
      nzType="primary"
      nzGhost
      (click)="backToPreviousStep(0)"
    >
      Back
    </button>
  </div>

  <div nz-col>
    <button
      class="continueBtn"
      nz-button
      nzType="primary"
      nzGhost
      (click)="steps(2)"
    >
      Continue
    </button>
  </div>
</div>
