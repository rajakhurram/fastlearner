<form>
  <div nz-row [nzGutter]="16" class="mt-3">
    <!-- TYPE -->

    <div nz-col [nzLg]="12" [nzMd]="12" [nzSm]="12" nzXs="24">
      <label class="label-color"
        >Type <span class="mandatory">*</span>
        <img
          style="margin-left: 10px"
          nzTooltipTitle="Earn revenue based on course views in the subscription model, or earn 90% on each
            purchase from premium course."
          nzTooltipPlacement="rightTop"
          [nzTooltipTrigger]="'hover'"
          nz-tooltip
          src="../../../../../assets/icons/info-icon.svg"
        />
      </label>
      <br />
      <nz-select
        name="type"
        style="margin-top: 5px"
        [nzSize]="'large'"
        nzPlaceHolder="Select type"
        [(ngModel)]="inputFields.selectedType"
        (ngModelChange)="validateType()"
        (nzBlur)="markTypeAsTouched()"
      >
        <nz-option
          nzCustomContent
          *ngFor="let type of inputFields.types"
          [nzLabel]="type.value"
          [nzValue]="type"
          [nzDisabled]="type.locked"
        >
          <span> {{ type.value }} </span>
          <span
            *ngIf="type.locked"
            style="font-size: 16px !important; color: black"
            class="cursor-pointer ml-2"
            nz-icon
            nzType="lock"
            nzTheme="fill"
          ></span>
        </nz-option>
      </nz-select>

      <div>
        <div style="color: red" *ngIf="!isTypeValid || isTypeTouched">
          Type is required.
        </div>
      </div>
    </div>

    <!-- TYPE -->

    <!-- CATEGORY -->
    <div nz-col nzLg="12" nzMd="12" nzSm="12" nzXs="24">
      <label class="label-color"
        >Category <span class="mandatory">*</span></label
      >
      <br />
      <nz-select
        name="category"
        style="margin-top: 5px"
        [nzSize]="'large'"
        nzPlaceHolder="Select category"
        [(ngModel)]="inputFields.selectedCategory"
        (ngModelChange)="validateCategory()"
        (nzBlur)="markCategoryAsTouched()"
      >
        <nz-option
          *ngFor="let category of inputFields.categories"
          [nzLabel]="category.name"
          [nzValue]="category.id"
        ></nz-option>
      </nz-select>

      <div>
        <div style="color: red" *ngIf="!isCategoryValid && isCategoryTouched">
          Type is required.
        </div>
      </div>
    </div>
    <!-- CATEGORY -->

    <!-- PRICE -->
    <!-- <div nz-col nzLg="12" nzMd="12" nzSm="12" nzXs="24">
      <label class="label-color"
        >Course Price <span class="mandatory">*</span></label
      >
      <nz-input-group style="margin-top: 5px" [nzPrefix]="staticValue">
        <input
          nz-input
          placeholder="Enter Price"
          nzSize="large"
          type="number"
          min="0"
        />
      </nz-input-group>
      <ng-template #staticValue>
        <span>$</span>
      </ng-template>
      <div>
        <div style="color: red">Course Price must be greater than 0.</div>

        <div style="color: red">Course Price cannot exceed $1000.</div>
      </div>
    </div> -->
    <!-- PRICE -->
  </div>

  <div nz-row [nzGutter]="16" class="mt-2">
    <!-- TITLE -->
    <app-input
      [name]="'title'"
      label="Title"
      placeholder="Enter title"
      [required]="true"
      [minLength]="10"
      [maxLength]="60"
      (validationError)="handleValidation('title', $event)"
      (modelChange)="
        inputHandler('title', $event, true, 10, 'courseTitleExist')
      "
    >
      <div style="color: red" *ngIf="validationErrors['title']">
        Title must be unique
      </div>
    </app-input>

    <!-- TITLE -->

    <!-- LEVEL -->
    <!-- <div nz-col nzLg="12" nzMd="12" nzSm="12" nzXs="24">
      <label class="label-color">Level <span class="mandatory">*</span></label>
      <nz-select
        name="level"
        [nzSize]="'large'"
        nzPlaceHolder="Select level"
        [(ngModel)]="inputFields.selectedLevel"
        (ngModelChange)="validateLevel()"
        (nzBlur)="markLevelAsTouched()"
      >
        <nz-option
          *ngFor="let level of inputFields.levels"
          [nzLabel]="level.name"
          [nzValue]="level"
        >
        </nz-option>
      </nz-select>

      <div *ngIf="isLevelTouched">
        <div style="color: red" *ngIf="!inputFields.selectedLevel">
          Level is required.
        </div>
      </div>
    </div> -->

    <app-dynamic-select
      name="level"
      [label]="'Level'"
      [placeholder]="'Select level'"
      [options]="inputFields.levels"
      [labelKey]="'name'"
      [valueKey]="'id'"
      [required]="true"
      [(model)]="inputFields.selectedLevel"
      [fullWidth]="true"
    ></app-dynamic-select>

    <!-- LEVEL -->
  </div>

  <!-- URL -->
  <div nz-row [nzGutter]="16" class="mt-2">
    <app-input
      [fullWidth]="true"
      [isInputGroup]="true"
      [name]="'url'"
      label="Url"
      [staticVal]="baseURL"
      [value]="inputFields.url"
      placeholder="Insert your test URL"
      [required]="true"
      [minLength]="10"
      [maxLength]="60"
      (validationError)="handleValidation('title', $event)"
      (modelChange)="inputHandler('url', $event, true, 10, 'courseUrlExist')"
    >
      <div style="color: red" *ngIf="validationErrors['title']">
        URL must be unique
      </div>
    </app-input>
  </div>
  <!-- URL -->

  <!-- HEADLINE -->
  <div nz-row [nzGutter]="16" class="mt-2">
    <app-input
      [fullWidth]="true"
      [name]="'headline'"
      label="Headline"
      placeholder="About the course/test"
      [required]="true"
      [maxLength]="300"
      (validationError)="handleValidation('title', $event)"
      (modelChange)="inputHandler('headline', $event)"
    >
    </app-input>
  </div>
  <!-- HEADLINE -->

  <!-- DESCRIPTION -->
  <div nz-row class="mt-2">
    <div nz-col nzSpan="24">
      <label class="label-color"
        >Description <span class="mandatory">*</span></label
      >
      <angular-editor
        [config]="editorConfig"
        [(ngModel)]="inputFields.description"
        [placeholder]="'Insert your test description'"
        (ngModelChange)="validateDescription()"
        [ngModelOptions]="{ standalone: true }"
        (blur)="markDescriptionAsTouched()"
      ></angular-editor>

      <div *ngIf="isDescriptionTouched">
        <div style="color: red" *ngIf="!inputFields.description">
          Description is required.
        </div>
        <div style="color: red" *ngIf="inputFields.description?.length > 3000">
          Course description cannot be greater than 3000 characters long.
        </div>
      </div>
    </div>
  </div>
  <!-- DESCRIPTION -->

  <!-- HASHTAGS -->
  <div class="mt-2">
    <label class="label-color">Hashtags <span class="mandatory">*</span></label>
    <div nz-row style="border: 1px solid #00000026; border-radius: 3px">
      <div nz-col nzSpan="24">
        <nz-tag
          *ngFor="let tag of inputFields.hashTags"
          [nzMode]="'closeable'"
          (nzOnClose)="removeTag(tag)"
          class="tag tags-margin"
        >
          {{ tag }}
        </nz-tag>

        <input
          nz-input
          nzSize="small"
          type="text"
          class="ml-1 mb-1 mt-1"
          style="width: 208px; height: 40px; border-radius: 50px; border: none"
          maxlength="50"
          placeholder="Add hashtags"
          [(ngModel)]="inputFields.hashTagValue"
          [ngModelOptions]="{ standalone: true }"
          (keyup.enter)="handleInputEnter()"
          (blur)="markHashtagsAsTouched()"
        />
      </div>
    </div>
    <div *ngIf="isHashtagsTouched">
      <div style="color: red" *ngIf="inputFields.hashTags.length === 0">
        At least one hashtag is required.
      </div>
    </div>
  </div>
  <!-- HASHTAGS -->

  <!-- PREREQUISITE -->
  <div nz-row [nzGutter]="16" class="mt-1">
    <app-input
      [fullWidth]="true"
      [name]="'prerequisite'"
      label="Prerequisite"
      placeholder="Eg. You must have a basic knowledge of programming"
      [required]="true"
      [maxLength]="500"
      (modelChange)="inputHandler('prerequisite', $event)"
    >
    </app-input>
  </div>
  <!-- PREREQUISITE -->

  <!-- WHAT STUDENTS LEARN -->
  <div nz-row class="mt-2 justify-row">
    <div class="w-100">
      <label class="label-color"
        >What will students learn? <span class="mandatory">*</span></label
      >
    </div>

    <ng-container *ngFor="let learn of inputFields.learnings; let i = index">
      <div
        nz-col
        class="text-class"
        [class.mt-1]="i !== 0"
        nzXs="24"
        nzSm="24"
        nzMd="24"
        nzLg="24"
      >
        <textarea
          class="text-area-class"
          [nzAutosize]="{ minRows: 1, maxRows: 6 }"
          nz-input
          placeholder="e.g Photoshop, Java, Programming"
          [(ngModel)]="learn.text"
          (ngModelChange)="validateLearnings()"
          [ngModelOptions]="{ standalone: true }"
          (blur)="markLearningsAsTouched()"
        ></textarea>
        <div
          nz-col
          nzSpan="3"
          class="content-center"
          *ngIf="i !== 0"
          (click)="deleteLearning(i)"
        >
          <span class="dlt-topic-container">
            <img
              class="dlt-icon cursor-pointer"
              src="../../../../../assets/icons/delete-icon.svg"
            />
          </span>
        </div>
        <button
          [id]="i"
          *ngIf="i === 0"
          class="addMoreBtn"
          nz-button
          nzType="primary"
          (click)="addLearning()"
          nzGhost
        >
          <span [id]="i" nz-icon nzType="plus" nzTheme="outline"></span> Add
          more
        </button>
      </div>
      <div *ngIf="isLearningsTouched">
        <div style="color: red" *ngIf="!learn.text">
          Learning summary cannot be empty.
        </div>
        <div style="color: red" *ngIf="learn.text > 500">
          Learning summary cannot be greater than 500 characters.
        </div>
      </div>
    </ng-container>
  </div>
  <!-- WHAT STUDENTS LEARN -->

  <!-- VIDEO AND THUMBNAIL INPUTS -->
  <div nz-row [nzGutter]="16" class="mt-3">
    <app-input
      [isFileInput]="true"
      [name]="'promotionalVideo'"
      label="Promotional video (optional)"
      idForAccesibility="video"
      accept="video/mp4, video/webm"
      btnTxt="Upload"
      (uploadFile)="fileUploadHandler($event, 'video')"
    >
    </app-input>

    <app-input
      [isFileInput]="true"
      [required]="true"
      [name]="'thumbnail'"
      label="Thumbnail"
      idForAccesibility="thumbnail"
      accept="image/png, image/jpeg, image/jpg"
      btnTxt="Upload"
      (uploadFile)="fileUploadHandler($event, 'img')"
    >
    </app-input>
  </div>

  <!-- PREVIEW VIDEO AND THUMBNAIL -->
  <div nz-row class="mt-3" [nzGutter]="16">
    <app-preview-upload
      [videoSrc]="videoSrc"
      fileType="video"
      [isUploaded]="inputFields.videoUploaded"
      [currentSelectedTopic]="currentSelectedTopic"
    ></app-preview-upload>

    <app-preview-upload
      [imageSrc]="imageSrc"
      fileType="img"
      [isUploaded]="inputFields.showThumbnail"
      [src]="inputFields.thumbnailPath"
    ></app-preview-upload>
  </div>
  <!-- PREVIEW VIDEO AND THUMBNAIL -->

  <div nz-row class="mt-3" style="justify-content: center">
    <div nz-col class="btns">
      <button
        class="backBtn"
        nz-button
        nzType="primary"
        nzGhost
        style="
          padding: 15px;
          margin: 0;
          margin-top: 0 !important;
          width: max-content;
        "
      >
        Back
      </button>

      <button
        [class.continue-btn-disable1]=""
        [class.continue-btn-disable]=""
        [disabled]=""
        class="continueBtn"
        nz-button
        nzType="primary"
        nzGhost
        style="padding: 15px; width: max-content"
      >
        Continue
      </button>
    </div>
  </div>
</form>
